(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{451:function(e,t,a){},568:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},572:function(e,t,a){},573:function(e,t,a){},574:function(e,t,a){},577:function(e,t,a){},578:function(e,t,a){},645:function(e,t,a){},646:function(e,t,a){},649:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){},652:function(e,t,a){},653:function(e,t,a){},678:function(e,t,a){},682:function(e,t,a){},683:function(e,t,a){},684:function(e,t,a){},685:function(e,t,a){},686:function(e,t,a){},687:function(e,t,a){},688:function(e,t,a){},689:function(e,t,a){},690:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(80),r=a.n(i),s=a(13),c=a.n(s),l=a(21),d=a(4),j=a(32),u=a(40),b=a(18),h=a(15),p=a(836),x=a(844),O=a(715),m=a(849),f=a(401),v=a(369),g=a(115),y=a(319),k=a(315),w=a(324),C=a(771),S=a(773),R=a(774),N=a(775),z=a(776),A=(a(451),a.p+"static/media/whiteLogo.2bba4759.svg"),T=a(767),D=a(770),I=a(847),P=a(848),M=a(852),B=a(41),q=a(59),W=a(27),F=a(46),E=a(47),L=a(36),V=a.n(L),U={apiBase:"http://35.158.139.42:8800/api"};V.a.defaults.withCredentials=!0;var K=function(){function e(){Object(F.a)(this,e)}return Object(E.a)(e,null,[{key:"reqConfig",value:function(){return{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}}},{key:"getCsrfToken",value:function(){return V.a.get(U.apiBase+"/getCsrfToken",this.reqConfig(),this.reqConfig())}},{key:"signup",value:function(e){return V.a.post(U.apiBase+"/users/signup",e,this.reqConfig())}},{key:"login",value:function(e){return V.a.post(U.apiBase+"/users/login",e,this.reqConfig())}},{key:"logout",value:function(){return V.a.get(U.apiBase+"/users/logout",this.reqConfig())}},{key:"validateProfile",value:function(e){return V.a.patch(U.apiBase+"/users/validateProfile/"+e.validationToken,this.reqConfig())}},{key:"userAuthenticated",value:function(e){return V.a.post(U.apiBase+"/users/auth",e,this.reqConfig())}},{key:"forgotPassword",value:function(e){return V.a.post(U.apiBase+"/users/forgotPassword",e,this.reqConfig())}},{key:"resetPassword",value:function(e){return V.a.patch(U.apiBase+"/users/resetPassword/"+e.resetToken,e.values,this.reqConfig())}},{key:"findResetToken",value:function(e){return V.a.post(U.apiBase+"/users/findResetToken",e,this.reqConfig())}},{key:"resendValidationEmail",value:function(e){return V.a.patch(U.apiBase+"/users/resendValidationEmail/"+e.validationToken,this.reqConfig())}},{key:"getAllUsers",value:function(){return V.a.get(U.apiBase+"/users",this.reqConfig())}},{key:"deactivateUser",value:function(e){return V.a.patch(U.apiBase+"/users/deactivateUser",e,this.reqConfig())}},{key:"activateUser",value:function(e){return V.a.patch(U.apiBase+"/users/activateUser",e,this.reqConfig())}},{key:"removeUser",value:function(e){return V.a.delete(U.apiBase+"/users/"+e,this.reqConfig())}},{key:"userEditorAdd",value:function(e){return V.a.patch(U.apiBase+"/users/userEditorAdd",e,this.reqConfig())}},{key:"userEditorRemove",value:function(e){return V.a.patch(U.apiBase+"/users/userEditorRemove",e,this.reqConfig())}},{key:"updateUserProfile",value:function(e){return V.a.patch(U.apiBase+"/users/updateUserProfile",e,this.reqConfig())}},{key:"updateUserPassword",value:function(e){return V.a.patch(U.apiBase+"/users/updateUserPassword",e,this.reqConfig())}},{key:"createDocument",value:function(e){return V.a.post(U.apiBase+"/documents",e,this.reqConfig())}},{key:"getAllDocuments",value:function(){return V.a.get(U.apiBase+"/documents",this.reqConfig())}},{key:"getDocument",value:function(e){return V.a.get(U.apiBase+"/documents/"+e.id,this.reqConfig())}},{key:"approvePublicAccess",value:function(e){return V.a.patch(U.apiBase+"/documents/approvePublicAccess",e,this.reqConfig())}},{key:"forbidPublicAccess",value:function(e){return V.a.patch(U.apiBase+"/documents/forbidPublicAccess",e,this.reqConfig())}},{key:"deleteDocument",value:function(e){return V.a.patch(U.apiBase+"/documents/deleteDocument",e,this.reqConfig())}},{key:"editDocument",value:function(e){return V.a.patch(U.apiBase+"/documents/editDocument",e,this.reqConfig())}},{key:"removeDocument",value:function(e){return V.a.delete(U.apiBase+"/documents/removeDocument/"+e,this.reqConfig())}},{key:"getUserHistoryReview",value:function(){return V.a.get(U.apiBase+"/documents/userHistoryReview",this.reqConfig())}},{key:"searchDocument",value:function(e){return V.a.post(U.apiBase+"/documents/searchDocument",e,this.reqConfig())}},{key:"getApprovedDocuments",value:function(){return V.a.get(U.apiBase+"/documents/approvedDocuments",this.reqConfig())}},{key:"downloadDocument",value:function(e){return V.a.patch(U.apiBase+"/documents/download",e,this.reqConfig())}},{key:"createRequest",value:function(e){return V.a.post(U.apiBase+"/requests",e,this.reqConfig())}},{key:"getAllRequests",value:function(){return V.a.get(U.apiBase+"/requests",this.reqConfig())}},{key:"approveRequest",value:function(e){return V.a.patch(U.apiBase+"/requests/approveRequest",e,this.reqConfig())}},{key:"declineRequest",value:function(e){return V.a.patch(U.apiBase+"/requests/declineRequest",e,this.reqConfig())}},{key:"getLastDaysLoginStat",value:function(){return V.a.get(U.apiBase+"/statistics/lastDaysLoginStatistics",this.reqConfig())}},{key:"getDobAverageOfUsers",value:function(){return V.a.get(U.apiBase+"/statistics/getDobAverageOfUsers",this.reqConfig())}},{key:"getCountriesOfUsers",value:function(){return V.a.get(U.apiBase+"/statistics/getCountriesOfUsers",this.reqConfig())}},{key:"getUsersStats",value:function(){return V.a.get(U.apiBase+"/statistics/getUsersStats",this.reqConfig())}},{key:"getDocsStats",value:function(){return V.a.get(U.apiBase+"/statistics/getDocsStats",this.reqConfig())}}]),e}(),G=(a(568),a(0));var H=function(e){return Object(G.jsxs)("div",{className:"spinner",children:[Object(G.jsx)("div",{className:"rect1",style:{backgroundColor:e.loaderColor&&"#393E46"}}),Object(G.jsx)("div",{className:"rect2",style:{backgroundColor:e.loaderColor&&"#393E46"}}),Object(G.jsx)("div",{className:"rect3",style:{backgroundColor:e.loaderColor&&"#393E46"}}),Object(G.jsx)("div",{className:"rect4",style:{backgroundColor:e.loaderColor&&"#393E46"}}),Object(G.jsx)("div",{className:"rect5",style:{backgroundColor:e.loaderColor&&"#393E46"}})]})};var _=function(e){var t,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],r=o[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),u=j[0],b=j[1],x=Object(n.useState)(!1),f=Object(d.a)(x,2),y=f[0],k=f[1],S=W.c().shape({email:W.e().required("Email je obavezan").email("Email nije validan")}),R=Object(B.e)({resolver:Object(q.a)(S)}),N=R.register,z=R.handleSubmit,A=R.formState.errors,F=function(){var t=Object(l.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.next=3,K.forgotPassword({email:a.email}).then((function(t){r(!1),e.onClose(),e.onOpenAlert(t.data.status,t.data.message)})).catch((function(e){k(!0),b(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),r(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:i,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,children:[Object(G.jsx)(D.a,{children:"Zaboravljena \u0161ifra"}),Object(G.jsxs)(I.a,{children:[Object(G.jsx)(P.a,{children:"Molimo vas da unese va\u0161 mail, kako bismo vam poslali reset link da oporavite va\u0161 ra\u010dun."}),y&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return k(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),u]}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({autoFocus:!0,margin:"dense",id:"name",label:"Email",type:"email",fullWidth:!0,required:!0,variant:"standard"},N("email")),{},{error:!!A.email})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(t=A.email)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{variant:"outlined",color:"primary",onClick:e.onClose,sx:{textTransform:"none",fontFamily:"Roboto",fontWeight:"bold"},children:"Poni\u0161ti"}),Object(G.jsx)(w.a,{variant:"contained",sx:{textTransform:"none",fontFamily:"Roboto",color:"#fff",fontWeight:"bold"},onClick:z(F),children:"Prijavi"})]})]})]})},Z=a(111),J=Object(Z.b)({name:"authentication",initialState:{isAuthenticated:!1,currentUser:{}},reducers:{login:function(e){e.isAuthenticated=!0},logout:function(e){e.isAuthenticated=!1,e.currentUser={}},setCurrentUser:function(e,t){e.currentUser=t.payload}}}),Y=J.actions,Q=J.reducer;var $=function(){var e,t,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],r=o[1],s=Object(n.useState)(!1),u=Object(d.a)(s,2),T=u[0],D=u[1],I=Object(n.useState)(""),P=Object(d.a)(I,2),M=P[0],F=P[1],E=Object(n.useState)(!1),L=Object(d.a)(E,2),V=L[0],U=L[1],Z=Object(n.useState)(!1),J=Object(d.a)(Z,2),Q=J[0],$=J[1],X=Object(n.useState)(""),ee=Object(d.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),oe=Object(d.a)(ne,2),ie=oe[0],re=oe[1],se=Object(n.useState)(""),ce=Object(d.a)(se,2),le=ce[0],de=ce[1],je=Object(n.useState)(!1),ue=Object(d.a)(je,2),be=ue[0],he=ue[1],pe=Object(n.useState)(""),xe=Object(d.a)(pe,2),Oe=xe[0],me=xe[1],fe=Object(n.useState)("success"),ve=Object(d.a)(fe,2),ge=ve[0],ye=ve[1],ke=W.c().shape({email:W.e().required("Email je obavezan").email("Email nije validan"),password:W.e().required("\u0160ifra je obavezna").min(8,"\u0160ifra mora da sadr\u017ei najmanje 8 karaktera").max(24,"\u0160ifra mo\u017ee da sadr\u017ei najvi\u0161e 24 karaktera")}),we=Object(B.e)({defaultValues:{email:"",password:""},resolver:Object(q.a)(ke)}),Ce=we.register,Se=we.handleSubmit,Re=we.reset,Ne=we.formState.errors,ze=Object(b.c)(),Ae=Object(n.useRef)(!0);Object(n.useEffect)((function(){return function(){Ae.current=!1}}),[]);var Te=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,K.login(t).then((function(e){Ae.current&&(e.data.user.active?(window.location.reload(),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("token",e.data.token),setTimeout((function(){ze(Y.login()),ze(Y.setCurrentUser(e.data.user)),D(!1),Re()}),1e3)):(he(!0),me(e.data.message),ye("warning"),Re()))})).catch((function(e){F(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),U(!0),D(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"resetPasswordAlert",children:ie&&Object(G.jsx)(p.a,{severity:"".concat(te),action:Object(G.jsx)(C.a,{onClick:function(){return re(!1)},style:{cursor:"pointer"}}),sx:{font:"14px Roboto"},children:le})}),Object(G.jsx)("div",{className:"validationProfileAlert",children:be&&Object(G.jsx)(p.a,{severity:ge,action:Object(G.jsx)(C.a,{onClick:function(){return he(!1)},style:{cursor:"pointer"}}),sx:{font:"14px Roboto"},children:Oe})}),Object(G.jsxs)(x.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(G.jsxs)("div",{className:"loginContent",children:[Object(G.jsx)("h2",{className:"headingLogin",children:"Digitalna biblioteka"}),Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:T,children:Object(G.jsx)(H,{})}),Object(G.jsxs)("form",{children:[Object(G.jsxs)("div",{className:"upperBox",children:[Object(G.jsx)("h4",{children:"Prijava"}),Object(G.jsx)("img",{src:A,alt:"logo"})]}),Object(G.jsxs)("div",{className:"formFieldsBox",children:[V&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return U(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),M]}),Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(S.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"email",label:"Email",type:"email",fullWidth:!0,required:!0,variant:"standard"},Ce("email")),{},{error:!!Ne.email,style:{borderColor:"#00ab55"}}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",marginLeft:4,font:"12px Roboto"},children:null===(e=Ne.email)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(R.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"password",label:"\u0160ifra",type:i?"text":"password",fullWidth:!0,required:!0,variant:"standard"},Ce("password")),{},{error:!!Ne.password,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return r(!i)},children:i?Object(G.jsx)(N.a,{style:{color:"#393E46"}}):Object(G.jsx)(z.a,{style:{color:"#393E46"}})})})}}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",marginLeft:4,font:"12px Roboto"},children:null===(t=Ne.password)||void 0===t?void 0:t.message})]})]}),Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",backgroundColor:"#393E46",color:"#fff",width:"75%",height:"10%",marginTop:-50,marginBottom:100},onClick:Se(Te),type:"submit",children:"Prijava"})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)("p",{className:"forgotPassBtn",onClick:function(){return $(!0)},children:"Zaboravljena \u0161ifra?"}),Object(G.jsxs)("p",{className:"registrationBtn",children:["Postanite korisnik,",Object(G.jsx)(j.b,{to:"/registracija",style:{textDecoration:"none",color:"black"},children:Object(G.jsx)("strong",{children:" Registrujte se"})})]})]})]}),Q&&Object(G.jsx)(_,{visible:Q,onClose:function(){return $(!1)},onOpenAlert:function(e,t){ae(e),de(t),re(!0)}})]})]})},X=a(791),ee=a(790),te=a(792),ae=a(795),ne=a(796),oe=a(789),ie=a(840),re=a(856),se=a(372),ce=a(841),le=a(256),de=a(793),je=a(370),ue=a(373),be=a(794),he=a(839),pe=a.p+"static/media/femaleLogo.73a228dc.png",xe=a.p+"static/media/maleLogo.0818dc99.png",Oe=a(853),me=a(777),fe=a(778),ve=a(779),ge=a(780),ye=a.p+"static/media/blackLogo.d214f1df.png";a(570);var ke=function(e){var t=Object(b.d)((function(e){return e.auth.currentUser})),a=function(){e.onClose()};return Object(G.jsx)("div",{children:Object(G.jsxs)(Oe.a,{anchor:"left",open:e.visible,onClose:e.onClose,sx:{width:500},className:"drawerContent",children:[Object(G.jsxs)("div",{className:"profile__avatar",children:[Object(G.jsx)("img",{alt:"logo",src:ye}),Object(G.jsx)("h5",{className:"headingDrawer",children:"Digitalna biblioteka"}),Object(G.jsxs)("div",{className:"currentUserDrawer",children:[Object(G.jsx)("h4",{className:"userName",children:"".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName)}),Object(G.jsx)("h4",{className:"userEmail",children:t.email})]})]}),Object(G.jsx)(je.a,{light:!0,variant:"middle",sx:{marginBottom:1}}),Object(G.jsxs)("div",{role:"presentation",children:[Object(G.jsx)(j.b,{to:"/",className:function(e){return e.isActive?"menuRow active":"menuRow"},onClick:a,children:Object(G.jsxs)("div",{className:"menuRow",children:[Object(G.jsx)(me.a,{className:"material-icons"}),Object(G.jsx)("h4",{children:"Po\u010detna"})]})}),("reader"===t.role||"editor"===t.role)&&Object(G.jsx)(j.b,{to:"/historijapregleda",className:function(e){return e.isActive?"menuRow active":"menuRow"},onClick:a,children:Object(G.jsxs)("div",{className:"menuRow",children:[Object(G.jsx)(fe.a,{className:"material-icons"}),Object(G.jsx)("h4",{children:"Historija pregleda"})]})}),("admin"===t.role||"editor"===t.role)&&Object(G.jsx)(j.b,{to:"/statistika",className:function(e){return e.isActive?"menuRow active":"menuRow"},onClick:a,children:Object(G.jsxs)("div",{className:"menuRow",children:[Object(G.jsx)(ve.a,{className:"material-icons"}),Object(G.jsx)("h4",{children:"Statistika"})]})}),"admin"===t.role&&Object(G.jsx)(j.b,{to:"/dokumenti",className:function(e){return e.isActive?"menuRow active":"menuRow"},onClick:a,children:Object(G.jsxs)("div",{className:"menuRow",children:[Object(G.jsx)(ge.a,{className:"material-icons"}),Object(G.jsx)("h4",{children:"Dokumenti"})]})}),Object(G.jsx)(je.a,{light:!0,variant:"middle",sx:{marginTop:1}})]}),Object(G.jsx)("div",{className:"footerContent",children:Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsx)("h4",{style:{width:170,color:"grey"},className:"signature",children:"Digitalna Biblioteka \xa92022 Developed by General IT and Software Solutions d.o.o. Sarajevo"})})})]})})},we=(a(571),Object(Z.b)({name:"docs",initialState:{isSearchStarted:!1,searchQuery:"",allDocs:[]},reducers:{startSearch:function(e,t){e.isSearchStarted=!0,e.searchQuery=t.payload}}})),Ce=we.actions,Se=we.reducer,Re=a(6),Ne=a(784),ze=a(781),Ae=a(705),Te=a(785),De=Object(Re.a)("div")((function(){return{top:0,left:0,zIndex:99,width:"100%",display:"flex",position:"absolute",alignItems:"center",height:64,backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)"}})),Ie=Object(he.a)((function(){return{textFieldSearchIcon:{marginLeft:30,"@media (max-width: 1280px)":{marginLeft:80}},searchBtn:{marginRight:10,textTransform:"none",fontWeight:"bold"}}}));function Pe(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(""),r=Object(d.a)(i,2),s=r[0],j=r[1],h=Object(b.c)(),p=Object(u.h)(),x=Ie(),O=function(){o(!1)},m=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"!==t.key&&"click"!==t.type||(h(Ce.startSearch(s)),p("/pretraga"),O());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)(Ne.a,{onClickAway:O,children:Object(G.jsxs)("div",{children:[!a&&Object(G.jsx)(k.a,{onClick:function(){o((function(e){return!e}))},children:Object(G.jsx)(Te.a,{})}),Object(G.jsx)(ze.a,{direction:"down",in:a,mountOnEnter:!0,unmountOnExit:!0,children:Object(G.jsxs)(De,{children:[Object(G.jsx)(Ae.a,{autoFocus:!0,fullWidth:!0,disableUnderline:!0,placeholder:"Pretraga\u2026",startAdornment:Object(G.jsx)(y.a,{position:"start",children:Object(G.jsx)(Te.a,{})}),className:x.textFieldSearchIcon,onChange:function(e){j(e.target.value)},onKeyDown:m}),Object(G.jsx)(w.a,{variant:"contained",className:x.searchBtn,onClick:m,children:"Pretra\u017ei"})]})})]})})}var Me=a(786),Be=a(788),qe=a(787),We=a(854),Fe=a(402),Ee=a(371),Le=a(850),Ve=a(851),Ue=a(855),Ke=a(64),Ge=a(322);function He(e){return Object(Ge.default)(new Date(e),"dd/MM/yyyy")}function _e(e){return Object(Ge.default)(new Date(e),"dd.MM.yyyy - HH:mm")}var Ze=Object(Z.b)({name:"requests",initialState:{allRequests:[],isRequestModalVisible:!1,selectedRequest:{}},reducers:{setAllRequests:function(e,t){e.allRequests=t.payload},setRequestModalVisible:function(e){e.isRequestModalVisible=!0},setSelectedRequest:function(e,t){e.selectedRequest=t.payload},resetInitialState:function(e){e.isRequestModalVisible=!1,e.selectedRequest={}}}}),Je=Ze.actions,Ye=Ze.reducer;function Qe(e){var t=function(e){var t=Object(G.jsxs)(g.a,{variant:"subtitle2",children:[e.documentName,Object(G.jsx)(g.a,{variant:"body2",sx:{color:"text.secondary",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:300,width:250},children:e.heading})]});return{icon:Object(G.jsx)(Me.a,{color:"success"}),documentName:t}}(e),a=t.icon,n=t.documentName,o=Object(b.c)();return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(qe.a,{disableGutters:!0,sx:{py:1.5,px:2.5,mt:"1px",backgroundColor:Object(Ke.a)("#919EAB",.16)},children:[Object(G.jsx)(We.a,{children:Object(G.jsx)(Fe.a,{title:"Pogledati",children:Object(G.jsx)(k.a,{onClick:function(){var t;t=e,o(Je.setRequestModalVisible()),o(Je.setSelectedRequest(t))},children:a})})}),Object(G.jsx)(Ee.a,{primary:n,secondary:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(g.a,{variant:"caption",sx:{mt:.5,display:"flex",alignItems:"center",color:"text.disabled"},children:e.requestedBy}),Object(G.jsxs)(g.a,{variant:"caption",sx:{ml:-.5,display:"flex",alignItems:"center",color:"text.disabled"},children:[Object(G.jsx)(Be.a,{sx:{mr:.5}}),_e(e.createdAt)]})]})})]})})}function $e(e){var t=Object(b.d)((function(e){return e.requests.allRequests})),a=Object(u.h)(),n=Object(oe.a)("(max-width:414px)");return Object(G.jsxs)(Le.a,{anchorEl:e.isOpen,open:Boolean(e.isOpen),onClose:e.onClose,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:n?40:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"center",py:2,px:2.5},children:[Object(G.jsxs)(f.a,{sx:{flexGrow:1},children:[Object(G.jsx)(g.a,{variant:"subtitle1",children:"Notifikacije"}),Object(G.jsxs)(g.a,{variant:"body2",sx:{color:"text.secondary"},children:["Ukupno ",t.length," ",t.length>1||0===t.length?"zahtjeva":"zahtjev"]})]}),Object(G.jsx)(ee.a,{color:"success"})]}),Object(G.jsx)(je.a,{}),Object(G.jsx)("div",{children:Object(G.jsx)(Ve.a,{disablePadding:!0,subheader:Object(G.jsx)(Ue.a,{disableSticky:!0,sx:{py:1,px:2.5,typography:"overline"},children:"Zahtjevi"}),children:t.length>0?t.slice(0,3).map((function(e,t){var a,n,o,i,r;return Object(G.jsx)(Qe,{id:e._id,description:e.reason,heading:"access"===e.type?"Zahtjev za pregled dokumenta":"Zahtjev za preuzimanje dokumenta",documentName:null===(a=e.document)||void 0===a?void 0:a.documentName,type:e.type,requestedBy:"".concat(null===(n=e.user)||void 0===n?void 0:n.firstName," ").concat(null===(o=e.user)||void 0===o?void 0:o.lastName),userId:null===(i=e.user)||void 0===i?void 0:i._id,docId:null===(r=e.document)||void 0===r?void 0:r._id,createdAt:e.createdAt},t)})):Object(G.jsx)(qe.a,{disableGutters:!0,sx:{py:1.5,px:2.5,mt:"1px",backgroundColor:Object(Ke.a)("#919EAB",.16)},children:Object(G.jsx)(g.a,{variant:"body2",sx:{color:"text.secondary"},children:"Trenutno nema zahtjeva"})})})}),Object(G.jsx)(je.a,{}),Object(G.jsx)(f.a,{sx:{p:1},children:Object(G.jsx)(w.a,{fullWidth:!0,disableRipple:!0,onClick:function(){a("/zahtjevi"),e.onClose()},sx:{textTransform:"none",fontWeight:"bold"},children:"Pogledati sve"})})]})}var Xe=Object(he.a)((function(){return{searchFieldButton:{textTransform:"none",fontWeight:"bold"},searchFieldIcon:{marginRight:10},navbar:{width:"85%",position:"fixed",zIndex:10,backdropFilter:"blur(10px)","@media (max-width: 1280px)":{width:"100%"},backgroundColor:"rgba(255, 255, 255, 0.5)"},navbarIcons:{color:"#393e46;",zIndex:11},searchField:{width:"83%",marginTop:10,padding:10,"@media (max-width: 1280px)":{width:"98%"}}}}));var et=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),r=Object(d.a)(i,2),s=r[0],c=r[1],l=Object(n.useState)(!1),h=Object(d.a)(l,2),x=h[0],m=h[1],v=Object(n.useState)(!1),g=Object(d.a)(v,2),y=g[0],w=g[1],C=Object(n.useState)(""),S=Object(d.a)(C,2),R=S[0],N=S[1],z=Object(n.useState)(null),A=Object(d.a)(z,2),T=A[0],D=A[1],I=Object(b.d)((function(e){return e.auth.currentUser})),P=Object(b.d)((function(e){return e.requests.allRequests})),M=Object(oe.a)("(max-width:1280px)"),B=Object(b.c)(),q=Object(u.h)(),W=Xe(),F=function(){o(null)};return Object(G.jsxs)("div",{children:[x&&Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:x,children:Object(G.jsx)(H,{loaderColor:"black"})}),y&&Object(G.jsx)(ie.a,{open:y,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return w(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return w(!1)},severity:"error",sx:{width:"100%",font:"14px Roboto"},children:R})}),Object(G.jsx)(f.a,{sx:{flexGrow:1},children:Object(G.jsx)(re.a,{position:"static",className:W.navbar,elevation:0,children:Object(G.jsxs)(se.a,{children:[M&&Object(G.jsx)(k.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{mr:2},onClick:function(){c(!0)},children:Object(G.jsx)(X.a,{className:W.navbarIcons})}),Object(G.jsx)(Pe,{}),Object(G.jsx)(f.a,{sx:{flexGrow:1}}),Object(G.jsxs)(f.a,{children:[("editor"===I.role||"admin"===I.role)&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(k.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",onClick:function(e){D(e.currentTarget)},children:Object(G.jsx)(ce.a,{badgeContent:null===P||void 0===P?void 0:P.length,color:"error",children:Object(G.jsx)(ee.a,{className:W.navbarIcons})})}),Object(G.jsx)($e,{isOpen:T,onClose:function(){D(null)}})]}),Object(G.jsx)(k.a,{size:"large",edge:"end","aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:function(e){o(e.currentTarget)},children:Object(G.jsx)(te.a,{className:W.navbarIcons})}),Object(G.jsxs)(le.a,{anchorEl:a,open:Boolean(a),onClose:F,onClick:F,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(G.jsxs)(de.a,{direction:"row",spacing:2,justifyContent:"center",children:[Object(G.jsx)("img",{src:"female"===(null===I||void 0===I?void 0:I.gender)?pe:xe,alt:"user avatar",className:"userAvatarNavMenu"}),Object(G.jsxs)("div",{children:[Object(G.jsxs)("p",{className:"currentUserMenu",children:[null===I||void 0===I?void 0:I.firstName," ",null===I||void 0===I?void 0:I.lastName]}),Object(G.jsx)("p",{className:"currentUserMenuEmail",children:null===I||void 0===I?void 0:I.email})]})]}),Object(G.jsx)(je.a,{}),Object(G.jsx)(j.b,{to:"/profil",style:{color:"black",textDecoration:"none"},children:Object(G.jsxs)(ue.a,{style:{height:50},children:[Object(G.jsx)(be.a,{children:Object(G.jsx)(ae.a,{sx:{color:"#393e46"}})}),"Profil"]})}),Object(G.jsxs)(ue.a,{onClick:function(){m(!0),K.logout().then((function(){localStorage.clear(),B(Y.logout()),q("/login")})).catch((function(e){N(e.response?"Problem prilikom odjavljivanja":"Konekcija sa serverom nije uspostavljena"),w(!0)})),m(!1)},style:{height:50},children:[Object(G.jsx)(be.a,{children:Object(G.jsx)(ne.a,{sx:{color:"#393e46"}})}),"Odjava"]})]})]})]})})}),s&&Object(G.jsx)(ke,{visible:s,onClose:function(){c(!1)}})]})};a(572);var tt=function(){var e=Object(b.d)((function(e){return e.auth.currentUser}));return Object(G.jsxs)("div",{className:"sidebar",children:[Object(G.jsx)("img",{src:ye,alt:"logo",className:"logo"}),Object(G.jsx)("h5",{className:"heading",children:"Digitalna biblioteka"}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,justifyContent:"center",className:"userNameIcon",children:[Object(G.jsx)("img",{src:"female"===(null===e||void 0===e?void 0:e.gender)?pe:xe,alt:"user avatar",className:"userAvatar"}),Object(G.jsx)("h4",{className:"currentUser",children:"".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName)})]}),Object(G.jsxs)(j.b,{to:"/",className:function(e){return e.isActive?"sidebarRow active":"sidebarRow"},children:[Object(G.jsx)(me.a,{className:"material-icons"}),Object(G.jsx)("h5",{children:"Po\u010detna"})]}),("reader"===e.role||"editor"===e.role)&&Object(G.jsxs)(j.b,{to:"/historijapregleda",className:function(e){return e.isActive?"sidebarRow active":"sidebarRow"},children:[Object(G.jsx)(fe.a,{className:"material-icons"}),Object(G.jsx)("h5",{children:"Historija pregleda"})]}),("admin"===e.role||"editor"===e.role)&&Object(G.jsxs)(j.b,{to:"/statistika",className:function(e){return e.isActive?"sidebarRow active":"sidebarRow"},children:[Object(G.jsx)(ve.a,{className:"material-icons"}),Object(G.jsx)("h5",{children:"Statistika pretra\u017eivanja"})]}),"admin"===e.role&&Object(G.jsxs)(j.b,{to:"/dokumenti",className:function(e){return e.isActive?"sidebarRow active":"sidebarRow"},children:[Object(G.jsx)(ge.a,{className:"material-icons"}),Object(G.jsx)("h5",{children:"Dokumenti"})]})]})};a(573);var at=function(){var e=Object(b.d)((function(e){return e.auth.isAuthenticated}));return Object(G.jsx)("div",{children:Object(G.jsxs)("div",{className:"mainHomeBody",children:[Object(G.jsx)(tt,{}),Object(G.jsxs)("div",{className:"dashboardBody",children:[e&&Object(G.jsx)(et,{}),Object(G.jsx)("div",{className:"contentBody",children:Object(G.jsx)(u.b,{})}),Object(G.jsx)("div",{className:"contentFooter",children:Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsx)("p",{children:"Digitalna Biblioteka \xa92022 Developed by General IT and Software Solutions d.o.o. Sarajevo"})})})]})]})})},nt=a(316),ot=a(708),it=a(801),rt=a(376),st=a(837),ct=a(845),lt=a(797),dt=a(798),jt=a(799),ut=a(800),bt=a(802),ht=a(803),pt=a(804),xt=a(211),Ot=a(253),mt=a(396),ft=(a(574),[{code:"AD",label:"Andorra",phone:"+376"},{code:"AE",label:"United Arab Emirates",phone:"+971"},{code:"AF",label:"Afghanistan",phone:"+93"},{code:"AG",label:"Antigua and Barbuda",phone:"+1268"},{code:"AI",label:"Anguilla",phone:"+1264"},{code:"AL",label:"Albania",phone:"+355"},{code:"AM",label:"Armenia",phone:"+374"},{code:"AO",label:"Angola",phone:"+244"},{code:"AQ",label:"Antarctica",phone:"+672"},{code:"AR",label:"Argentina",phone:"+54"},{code:"AS",label:"American Samoa",phone:"+1684"},{code:"AT",label:"Austria",phone:"+43"},{code:"AU",label:"Australia",phone:"+61",suggested:!0},{code:"AW",label:"Aruba",phone:"+297"},{code:"AX",label:"Alland Islands",phone:"+358"},{code:"AZ",label:"Azerbaijan",phone:"+994"},{code:"BA",label:"Bosnia and Herzegovina",phone:"+387"},{code:"BB",label:"Barbados",phone:"+1246"},{code:"BD",label:"Bangladesh",phone:"+880"},{code:"BE",label:"Belgium",phone:"+32"},{code:"BF",label:"Burkina Faso",phone:"+226"},{code:"BG",label:"Bulgaria",phone:"+359"},{code:"BH",label:"Bahrain",phone:"+973"},{code:"BI",label:"Burundi",phone:"+257"},{code:"BJ",label:"Benin",phone:"+229"},{code:"BL",label:"Saint Barthelemy",phone:"+590"},{code:"BM",label:"Bermuda",phone:"+1441"},{code:"BN",label:"Brunei Darussalam",phone:"+673"},{code:"BO",label:"Bolivia",phone:"+591"},{code:"BR",label:"Brazil",phone:"+55"},{code:"BS",label:"Bahamas",phone:"+1242"},{code:"BT",label:"Bhutan",phone:"+975"},{code:"BV",label:"Bouvet Island",phone:"+47"},{code:"BW",label:"Botswana",phone:"+267"},{code:"BY",label:"Belarus",phone:"+375"},{code:"BZ",label:"Belize",phone:"+501"},{code:"CA",label:"Canada",phone:"+1",suggested:!0},{code:"CC",label:"Cocos (Keeling) Islands",phone:"+61"},{code:"CD",label:"Congo, Democratic Republic of the",phone:"+243"},{code:"CF",label:"Central African Republic",phone:"+236"},{code:"CG",label:"Congo, Republic of the",phone:"+242"},{code:"CH",label:"Switzerland",phone:"+41"},{code:"CI",label:"Cote d'Ivoire",phone:"+225"},{code:"CK",label:"Cook Islands",phone:"+682"},{code:"CL",label:"Chile",phone:"+56"},{code:"CM",label:"Cameroon",phone:"+237"},{code:"CN",label:"China",phone:"+86"},{code:"CO",label:"Colombia",phone:"+57"},{code:"CR",label:"Costa Rica",phone:"+506"},{code:"CU",label:"Cuba",phone:"+53"},{code:"CV",label:"Cape Verde",phone:"+238"},{code:"CW",label:"Curacao",phone:"+599"},{code:"CX",label:"Christmas Island",phone:"+61"},{code:"CY",label:"Cyprus",phone:"+357"},{code:"CZ",label:"Czech Republic",phone:"+420"},{code:"DE",label:"Germany",phone:"+49",suggested:!0},{code:"DJ",label:"Djibouti",phone:"+253"},{code:"DK",label:"Denmark",phone:"+45"},{code:"DM",label:"Dominica",phone:"+1767"},{code:"DO",label:"Dominican Republic",phone:"+1809"},{code:"DZ",label:"Algeria",phone:"+213"},{code:"EC",label:"Ecuador",phone:"+593"},{code:"EE",label:"Estonia",phone:"+372"},{code:"EG",label:"Egypt",phone:"+20"},{code:"EH",label:"Western Sahara",phone:"+212"},{code:"ER",label:"Eritrea",phone:"+291"},{code:"ES",label:"Spain",phone:"+34"},{code:"ET",label:"Ethiopia",phone:"+251"},{code:"FI",label:"Finland",phone:"+358"},{code:"FJ",label:"Fiji",phone:"+679"},{code:"FK",label:"Falkland Islands (Malvinas)",phone:"+500"},{code:"FM",label:"Micronesia, Federated States of",phone:"+691"},{code:"FO",label:"Faroe Islands",phone:"+298"},{code:"FR",label:"France",phone:"+33",suggested:!0},{code:"GA",label:"Gabon",phone:"+241"},{code:"GB",label:"United Kingdom",phone:"+44"},{code:"GD",label:"Grenada",phone:"+1473"},{code:"GE",label:"Georgia",phone:"+995"},{code:"GF",label:"French Guiana",phone:"+594"},{code:"GG",label:"Guernsey",phone:"+44"},{code:"GH",label:"Ghana",phone:"+233"},{code:"GI",label:"Gibraltar",phone:"+350"},{code:"GL",label:"Greenland",phone:"+299"},{code:"GM",label:"Gambia",phone:"+220"},{code:"GN",label:"Guinea",phone:"+224"},{code:"GP",label:"Guadeloupe",phone:"+590"},{code:"GQ",label:"Equatorial Guinea",phone:"+240"},{code:"GR",label:"Greece",phone:"+30"},{code:"GS",label:"South Georgia and the South Sandwich Islands",phone:"+500"},{code:"GT",label:"Guatemala",phone:"+502"},{code:"GU",label:"Guam",phone:"+1671"},{code:"GW",label:"GuineaBissau",phone:"+245"},{code:"GY",label:"Guyana",phone:"+592"},{code:"HK",label:"Hong Kong",phone:"+852"},{code:"HM",label:"Heard Island and McDonald Islands",phone:"+672"},{code:"HN",label:"Honduras",phone:"+504"},{code:"HR",label:"Croatia",phone:"+385"},{code:"HT",label:"Haiti",phone:"+509"},{code:"HU",label:"Hungary",phone:"+36"},{code:"ID",label:"Indonesia",phone:"+62"},{code:"IE",label:"Ireland",phone:"+353"},{code:"IL",label:"Israel",phone:"+972"},{code:"IM",label:"Isle of Man",phone:"+44"},{code:"IN",label:"India",phone:"+91"},{code:"IO",label:"British Indian Ocean Territory",phone:"+246"},{code:"IQ",label:"Iraq",phone:"+964"},{code:"IR",label:"Iran, Islamic Republic of",phone:"+98"},{code:"IS",label:"Iceland",phone:"+354"},{code:"IT",label:"Italy",phone:"+39"},{code:"JE",label:"Jersey",phone:"+44"},{code:"JM",label:"Jamaica",phone:"+1876"},{code:"JO",label:"Jordan",phone:"+962"},{code:"JP",label:"Japan",phone:"+81",suggested:!0},{code:"KE",label:"Kenya",phone:"+254"},{code:"KG",label:"Kyrgyzstan",phone:"+996"},{code:"KH",label:"Cambodia",phone:"+855"},{code:"KI",label:"Kiribati",phone:"+686"},{code:"KM",label:"Comoros",phone:"+269"},{code:"KN",label:"Saint Kitts and Nevis",phone:"+1869"},{code:"KP",label:"Korea, Democratic People's Republic of",phone:"+850"},{code:"KR",label:"Korea, Republic of",phone:"+82"},{code:"KW",label:"Kuwait",phone:"+965"},{code:"KY",label:"Cayman Islands",phone:"+1345"},{code:"KZ",label:"Kazakhstan",phone:"+7"},{code:"LA",label:"Lao People's Democratic Republic",phone:"+856"},{code:"LB",label:"Lebanon",phone:"+961"},{code:"LC",label:"Saint Lucia",phone:"+1758"},{code:"LI",label:"Liechtenstein",phone:"+423"},{code:"LK",label:"Sri Lanka",phone:"+94"},{code:"LR",label:"Liberia",phone:"+231"},{code:"LS",label:"Lesotho",phone:"+266"},{code:"LT",label:"Lithuania",phone:"+370"},{code:"LU",label:"Luxembourg",phone:"+352"},{code:"LV",label:"Latvia",phone:"+371"},{code:"LY",label:"Libya",phone:"+218"},{code:"MA",label:"Morocco",phone:"+212"},{code:"MC",label:"Monaco",phone:"+377"},{code:"MD",label:"Moldova, Republic of",phone:"+373"},{code:"ME",label:"Montenegro",phone:"+382"},{code:"MF",label:"Saint Martin (French part)",phone:"+590"},{code:"MG",label:"Madagascar",phone:"+261"},{code:"MH",label:"Marshall Islands",phone:"+692"},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",phone:"+389"},{code:"ML",label:"Mali",phone:"+223"},{code:"MM",label:"Myanmar",phone:"+95"},{code:"MN",label:"Mongolia",phone:"+976"},{code:"MO",label:"Macao",phone:"+853"},{code:"MP",label:"Northern Mariana Islands",phone:"+1670"},{code:"MQ",label:"Martinique",phone:"+596"},{code:"MR",label:"Mauritania",phone:"+222"},{code:"MS",label:"Montserrat",phone:"+1664"},{code:"MT",label:"Malta",phone:"+356"},{code:"MU",label:"Mauritius",phone:"+230"},{code:"MV",label:"Maldives",phone:"+960"},{code:"MW",label:"Malawi",phone:"+265"},{code:"MX",label:"Mexico",phone:"+52"},{code:"MY",label:"Malaysia",phone:"+60"},{code:"MZ",label:"Mozambique",phone:"+258"},{code:"NA",label:"Namibia",phone:"+264"},{code:"NC",label:"New Caledonia",phone:"+687"},{code:"NE",label:"Niger",phone:"+227"},{code:"NF",label:"Norfolk Island",phone:"+672"},{code:"NG",label:"Nigeria",phone:"+234"},{code:"NI",label:"Nicaragua",phone:"+505"},{code:"NL",label:"Netherlands",phone:"+31"},{code:"NO",label:"Norway",phone:"+47"},{code:"NP",label:"Nepal",phone:"+977"},{code:"NR",label:"Nauru",phone:"+674"},{code:"NU",label:"Niue",phone:"+683"},{code:"NZ",label:"New Zealand",phone:"+64"},{code:"OM",label:"Oman",phone:"+968"},{code:"PA",label:"Panama",phone:"+507"},{code:"PE",label:"Peru",phone:"+51"},{code:"PF",label:"French Polynesia",phone:"+689"},{code:"PG",label:"Papua New Guinea",phone:"+675"},{code:"PH",label:"Philippines",phone:"+63"},{code:"PK",label:"Pakistan",phone:"+92"},{code:"PL",label:"Poland",phone:"+48"},{code:"PM",label:"Saint Pierre and Miquelon",phone:"+508"},{code:"PN",label:"Pitcairn",phone:"+870"},{code:"PR",label:"Puerto Rico",phone:"+1"},{code:"PS",label:"Palestine, State of",phone:"+970"},{code:"PT",label:"Portugal",phone:"+351"},{code:"PW",label:"Palau",phone:"+680"},{code:"PY",label:"Paraguay",phone:"+595"},{code:"QA",label:"Qatar",phone:"+974"},{code:"RE",label:"Reunion",phone:"+262"},{code:"RO",label:"Romania",phone:"+40"},{code:"RS",label:"Serbia",phone:"+381"},{code:"RU",label:"Russian Federation",phone:"+7"},{code:"RW",label:"Rwanda",phone:"+250"},{code:"SA",label:"Saudi Arabia",phone:"+966"},{code:"SB",label:"Solomon Islands",phone:"+677"},{code:"SC",label:"Seychelles",phone:"+248"},{code:"SD",label:"Sudan",phone:"+249"},{code:"SE",label:"Sweden",phone:"+46"},{code:"SG",label:"Singapore",phone:"+65"},{code:"SH",label:"Saint Helena",phone:"+290"},{code:"SI",label:"Slovenia",phone:"+386"},{code:"SJ",label:"Svalbard and Jan Mayen",phone:"+47"},{code:"SK",label:"Slovakia",phone:"+421"},{code:"SL",label:"Sierra Leone",phone:"+232"},{code:"SM",label:"San Marino",phone:"+378"},{code:"SN",label:"Senegal",phone:"+221"},{code:"SO",label:"Somalia",phone:"+252"},{code:"SR",label:"Suriname",phone:"+597"},{code:"SS",label:"South Sudan",phone:"+211"},{code:"ST",label:"Sao Tome and Principe",phone:"+239"},{code:"SV",label:"El Salvador",phone:"+503"},{code:"SX",label:"Sint Maarten (Dutch part)",phone:"+1721"},{code:"SY",label:"Syrian Arab Republic",phone:"+963"},{code:"SZ",label:"Swaziland",phone:"+268"},{code:"TC",label:"Turks and Caicos Islands",phone:"+1649"},{code:"TD",label:"Chad",phone:"+235"},{code:"TF",label:"French Southern Territories",phone:"+262"},{code:"TG",label:"Togo",phone:"+228"},{code:"TH",label:"Thailand",phone:"+66"},{code:"TJ",label:"Tajikistan",phone:"+992"},{code:"TK",label:"Tokelau",phone:"+690"},{code:"TL",label:"TimorLeste",phone:"+670"},{code:"TM",label:"Turkmenistan",phone:"+993"},{code:"TN",label:"Tunisia",phone:"+216"},{code:"TO",label:"Tonga",phone:"+676"},{code:"TR",label:"Turkey",phone:"+90"},{code:"TT",label:"Trinidad and Tobago",phone:"+1868"},{code:"TV",label:"Tuvalu",phone:"+688"},{code:"TW",label:"Taiwan, Province of China",phone:"+886"},{code:"TZ",label:"United Republic of Tanzania",phone:"+255"},{code:"UA",label:"Ukraine",phone:"+380"},{code:"UG",label:"Uganda",phone:"+256"},{code:"US",label:"United States",phone:"+1",suggested:!0},{code:"UY",label:"Uruguay",phone:"+598"},{code:"UZ",label:"Uzbekistan",phone:"+998"},{code:"VA",label:"Holy See (Vatican City State)",phone:"+379"},{code:"VC",label:"Saint Vincent and the Grenadines",phone:"+1784"},{code:"VE",label:"Venezuela",phone:"+58"},{code:"VG",label:"British Virgin Islands",phone:"+1284"},{code:"VI",label:"US Virgin Islands",phone:"+1340"},{code:"VN",label:"Vietnam",phone:"+84"},{code:"VU",label:"Vanuatu",phone:"+678"},{code:"WF",label:"Wallis and Futuna",phone:"+681"},{code:"WS",label:"Samoa",phone:"+685"},{code:"XK",label:"Kosovo",phone:"+383"},{code:"YE",label:"Yemen",phone:"+967"},{code:"YT",label:"Mayotte",phone:"+262"},{code:"ZA",label:"South Africa",phone:"+27"},{code:"ZM",label:"Zambia",phone:"+260"},{code:"ZW",label:"Zimbabwe",phone:"+263"}]),vt=a(271),gt=a.n(vt);var yt=function(){var e,t,a,o,i,r,s=Object(n.useState)(!1),u=Object(d.a)(s,2),b=u[0],T=u[1],D=Object(n.useState)(!1),I=Object(d.a)(D,2),P=I[0],M=I[1],F=Object(n.useState)(""),E=Object(d.a)(F,2),L=E[0],V=E[1],U=Object(n.useState)(!1),_=Object(d.a)(U,2),Z=_[0],J=_[1],Y=Object(n.useState)(!1),Q=Object(d.a)(Y,2),$=Q[0],X=Q[1],ee=Object(n.useState)(""),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],oe=W.c().shape({firstName:W.e().required("Ime je obavezno"),lastName:W.e().required("Prezime je obavezno"),email:W.e().required("Email je obavezan").email("Email nije validan"),password:W.e().required("\u0160ifra je obavezna").max(24,"\u0160ifra mo\u017ee da sadr\u017ei maximalno 24 karaktera").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,"\u0160ifra mora da sadr\u017ei najmanje 8 karaktera, jedno veliko, jedno malo slovo, jedan broj i jedan simbol"),phoneNumber:W.e().required("Broj telefona je obavezan").min(10,"Nedovoljan broj karaktera"),dob:W.b().required("Datum ro\u0111enja je obavezan"),gender:W.e().required("Spol je obavezan"),country:W.e().required("Dr\u017eava je obavezna"),organization:W.e(),registrationPurpose:W.e().required("Svrha istr\u017eivanja je obavezna")}),ie=Object(B.e)({resolver:Object(q.a)(oe),defaultValues:{firstName:"",lastName:"",email:"",password:"",phoneNumber:"",dob:null,gender:"",country:"",organization:"",registrationPurpose:""}}),re=ie.register,se=ie.control,ce=ie.handleSubmit,le=ie.reset,je=ie.formState.errors,ue=function(){var e=Object(l.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,K.signup(t).then((function(e){X(!0),ne(e.data.message),le()})).catch((function(e){V(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena, poku\u0161ajte da osjve\u017eite aplikaciju ili nas kontaktirajte putem info maila."),J(!0)}));case 3:M(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"validationProfileAlert",children:$&&Object(G.jsx)(p.a,{severity:"success",action:Object(G.jsx)(C.a,{onClick:function(){return X(!1)},style:{cursor:"pointer"}}),sx:{font:"14px Roboto"},children:ae})}),Object(G.jsx)("h2",{className:"headingSignup",children:"Digitalna biblioteka"}),Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:P,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(x.a,{container:!0,justifyContent:"center",alignItems:"center",sx:{maxWidth:600,margin:"50px auto",WebkitBoxShadow:"-1px -1px 8px -1px rgba(0, 0, 0, 0.52)",MozBoxShadow:"-1px -1px 8px -1px rgba(0, 0, 0, 0.52)",boxShadow:"-1px -1px 8px -1px rgba(0, 0, 0, 0.52)",borderRadius:3},children:[Object(G.jsx)("div",{className:"signupContent",sx:{paddingBottom:150},children:Object(G.jsxs)("form",{children:[Object(G.jsxs)("div",{className:"upperBoxSignup",children:[Object(G.jsx)("h4",{children:"Registracija"}),Object(G.jsx)("img",{src:A,style:{justifyContent:"center",alignItems:"center"},alt:"logo"})]}),Object(G.jsxs)("div",{className:"formFieldsBoxSignup",children:[Z&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return J(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),L," \u2014"," ",Object(G.jsx)("strong",{children:" Poku\u0161ajte ponovo !"})]}),Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(S.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"firstName",label:"Ime",type:"text",fullWidth:!0,required:!0,variant:"standard"},re("firstName")),{},{error:!!je.firstName}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(e=je.firstName)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(S.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"lastName",label:"Prezime",type:"text",fullWidth:!0,required:!0,variant:"standard"},re("lastName")),{},{error:!!je.lastName}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(t=je.lastName)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(lt.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"email",label:"Email",type:"email",fullWidth:!0,required:!0,variant:"standard"},re("email")),{},{error:!!je.email}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(a=je.email)||void 0===a?void 0:a.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(R.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"password",label:"\u0160ifra",type:b?"text":"password",fullWidth:!0,required:!0,variant:"standard"},re("password")),{},{error:!!je.password,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return T(!b)},children:b?Object(G.jsx)(N.a,{style:{color:"#393E46"}}):Object(G.jsx)(z.a,{style:{color:"#393E46"}})})})}}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(o=je.password)||void 0===o?void 0:o.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(dt.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(B.a,{control:se,name:"phoneNumber",render:function(e){var t=e.field;return Object(G.jsx)(gt.a,{id:"phoneNumber",required:!0,fullWidth:!0,label:"Broj telefona",defaultCountry:"ba",onChange:function(e){return t.onChange(e&&e)},disableAreaCodes:!0,error:!!je.phoneNumber})}})]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:je.phoneNumber&&"Broj telefona je obavezan"})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(jt.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(xt.b,{dateAdapter:mt.a,children:Object(G.jsx)(B.a,{control:se,name:"dob",defaultValue:null,render:function(e){var t=e.field;return Object(G.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{label:"Datum ro\u0111enja",inputFormat:"dd/MM/yyyy",disableFuture:!0,onChange:function(e){t.onChange(e&&e.toJSON())},clearable:!0,renderInput:function(e){return Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({},e),{},{variant:"standard",required:!0,fullWidth:!0,error:!!je.dob}))}}))},rules:{required:!0}})})]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:je.dob&&"Datum ro\u0111enja je obavezan"})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(ut.a,{sx:{color:"#393E46",mr:1,my:2}}),Object(G.jsx)(nt.a,{component:"fieldset",children:Object(G.jsxs)(de.a,{spacing:4,direction:"row",children:[Object(G.jsx)(ot.a,{component:"legend",sx:{my:2},error:!!je.gender,children:"Spol*"}),Object(G.jsx)(B.a,{control:se,name:"gender",rules:{required:!0},render:function(e){var t=e.field;return Object(G.jsxs)(it.a,Object(h.a)(Object(h.a)({row:!0,"aria-label":"gender",name:"row-radio-buttons-group"},t),{},{children:[Object(G.jsx)(rt.a,{value:"female",control:Object(G.jsx)(st.a,{}),label:"\u017d"}),Object(G.jsx)(rt.a,{value:"male",control:Object(G.jsx)(st.a,{}),label:"M"})]}))}})]})})]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:je.gender&&"Spol je obavezan"})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(bt.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(B.a,{name:"country",control:se,render:function(e){var t=e.field;return Object(G.jsx)(ct.a,{id:"country",options:ft,getOptionLabel:function(e){return e.label},renderOption:function(e,t){return Object(G.jsxs)(f.a,Object(h.a)(Object(h.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:[Object(G.jsx)("img",{loading:"lazy",width:"20",src:"https://flagcdn.com/w20/".concat(t.code.toLowerCase(),".png"),srcSet:"https://flagcdn.com/w40/".concat(t.code.toLowerCase(),".png 2x"),alt:""}),t.label," (",t.code,")"]}))},required:!0,fullWidth:!0,renderInput:function(e){return Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({},e),{},{label:"Dr\u017eava",required:!0,variant:"standard",error:!!je.country}))},onChange:function(e,a){return t.onChange(a&&a.label)}})},rules:{required:!0}})]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:je.country&&"Dr\u017eava je obavezna"})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(ht.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"organization",label:"Organizacija",type:"organization",fullWidth:!0,variant:"standard"},re("organization")),{},{error:!!je.organization}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(i=je.organization)||void 0===i?void 0:i.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(pt.a,{sx:{color:"#393E46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"registrationPurpose",label:"Svrha istra\u017eivanja",type:"registrationPurpose",fullWidth:!0,required:!0,variant:"outlined"},re("registrationPurpose")),{},{error:!!je.registrationPurpose,multiline:!0,rows:3}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:null===(r=je.registrationPurpose)||void 0===r?void 0:r.message})]})]})]}),Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",backgroundColor:"#393E46",width:"75%",color:"#fff",height:"10%",marginTop:-50,display:"block",marginLeft:"auto",marginRight:"auto"},onClick:ce(ue),type:"submit",children:"Registruj se"})]})}),Object(G.jsxs)("p",{className:"loginBtn",children:["Ukoliko ste korisnik,",Object(G.jsx)(j.b,{to:"/",style:{textDecoration:"none",color:"black"},children:Object(G.jsx)("strong",{children:" Prijavite se"})})]})]})]})};a(577);var kt=function(){var e,t,a=Object(u.i)().resetToken,o=Object(n.useState)(!1),i=Object(d.a)(o,2),r=i[0],s=i[1],j=Object(n.useState)(!1),b=Object(d.a)(j,2),S=b[0],T=b[1],D=Object(n.useState)(!1),I=Object(d.a)(D,2),P=I[0],M=I[1],F=Object(n.useState)(""),E=Object(d.a)(F,2),L=E[0],V=E[1],U=Object(n.useState)(!1),_=Object(d.a)(U,2),Z=_[0],J=_[1],Y=Object(n.useState)(!1),Q=Object(d.a)(Y,2),$=Q[0],X=Q[1],ee=Object(u.h)(),te=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.findResetToken({resetToken:a}).then((function(e){te.current&&200===e.status&&X(!0)})).catch((function(){ee("/")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){te.current=!1}}),[a,ee]);var ae=W.c().shape({password:W.e().required("\u0160ifra je obavezna").max(24,"\u0160ifra mo\u017ee da sadr\u017ei maximalno 24 karaktera").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,"\u0160ifra mora da sadr\u017ei minimalno 8 karaktera, jedno veliko, jedno malo slovo, jedan broj i jedan simbol"),passwordConfirm:W.e().required("Morate ponoviti \u0161ifru").oneOf([W.d("password"),null],"\u0160ifre moraju biti iste")}),ne=Object(B.e)({resolver:Object(q.a)(ae)}),oe=ne.register,ie=ne.handleSubmit,re=ne.formState.errors,se=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,K.resetPassword({values:t,resetToken:a}).then((function(e){V(e.data.message),T(!1),J(!0)})).catch((function(e){V(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),M(!0),T(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)("div",{className:"resetPasswordPage",children:$&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",alignItems:"center",children:Z?Object(G.jsxs)("div",{className:"resetPasswordSuccess",children:[Object(G.jsx)("h2",{children:L}),Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",backgroundColor:"#fff",color:"#393e46",height:"10%",marginBottom:20,display:"block",marginLeft:"auto",marginRight:"auto"},onClick:function(){ee("/login")},children:"Prijavite se"})]}):Object(G.jsxs)("div",{className:"resetPasswordContent",children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:S,children:Object(G.jsx)(H,{})}),Object(G.jsxs)("form",{children:[Object(G.jsxs)("div",{className:"upperBoxReset",children:[Object(G.jsx)("h4",{children:"Reset \u0161ifre"}),Object(G.jsx)("img",{src:A,alt:"logo"})]}),Object(G.jsxs)("div",{className:"formFieldsResetBox",children:[P&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return M(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),L]}),Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(R.a,{sx:{color:"#393e46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"password",label:"Nova \u0161ifra",type:r?"text":"password",fullWidth:!0,required:!0,variant:"standard"},oe("password")),{},{error:!!re.password,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return s(!r)},children:r?Object(G.jsx)(N.a,{style:{color:"#393e46"}}):Object(G.jsx)(z.a,{style:{color:"#393e46"}})})})}}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",marginLeft:4,font:"12px Roboto"},children:null===(e=re.password)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsxs)(f.a,{sx:{display:"flex",alignItems:"flex-end"},children:[Object(G.jsx)(R.a,{sx:{color:"#393e46",mr:1,my:.5}}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"passwordConfirm",label:"Potvrdite novu \u0161ifru",type:r?"text":"password",fullWidth:!0,required:!0,variant:"standard"},oe("passwordConfirm")),{},{error:!!re.passwordConfirm,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return s(!r)},children:r?Object(G.jsx)(N.a,{style:{color:"#393e46"}}):Object(G.jsx)(z.a,{style:{color:"#393e46"}})})})}}))]}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",marginLeft:4,font:"12px Roboto"},children:null===(t=re.passwordConfirm)||void 0===t?void 0:t.message})]})]}),Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",color:"#fff",width:"75%",height:"10%",marginTop:-80},onClick:ie(se),children:"Resetuj \u0161ifru"})]})]})})})};a(578);var wt=function(){var e=Object(u.i)().validationToken,t=Object(n.useState)(""),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(n.useState)(!1),s=Object(d.a)(r,2),j=s[0],b=s[1],h=Object(n.useState)(!1),m=Object(d.a)(h,2),f=m[0],v=m[1],g=Object(n.useState)(!1),y=Object(d.a)(g,2),k=y[0],S=y[1],R=Object(n.useState)(!1),N=Object(d.a)(R,2),z=N[0],A=N[1],T=Object(n.useState)(""),D=Object(d.a)(T,2),I=D[0],P=D[1],M=Object(n.useState)("success"),B=Object(d.a)(M,2),q=B[0],W=B[1],F=Object(u.h)(),E=Object(n.useRef)(!0);Object(n.useEffect)((function(){var t=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.validateProfile({validationToken:e}).then((function(e){b(!0),i(e.data.message)})).catch((function(e){var t,a;E.current&&403===(null===(t=e.response)||void 0===t?void 0:t.data.status)&&F("/"),b(!0),i(null===(a=e.response)||void 0===a?void 0:a.data.message),v(!0)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){E.current=!1}}),[e,F]);var L=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,K.resendValidationEmail({validationToken:e}).then((function(e){A(!0),W("success"),P(e.data.message)})).catch((function(e){var t;A(!0),W("error"),P(null===(t=e.response)||void 0===t?void 0:t.data.message)}));case 3:S(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:"validatePage",children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:k,children:Object(G.jsx)(H,{})}),j&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(G.jsxs)("div",{className:"validationMessage",children:[Object(G.jsx)("h2",{children:o}),Object(G.jsxs)(de.a,{spacing:2,direction:"row",justifyContent:"center",style:{marginBottom:20},children:[f&&Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",backgroundColor:"#fff",color:"#393e46",height:"10%"},onClick:L,children:"Zatra\u017eite novi validacioni token"}),!f&&Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",backgroundColor:"#fff",color:"#393e46",height:"10%"},onClick:function(){F("/login")},children:"Prijavite se"})]})]})}),z&&Object(G.jsx)("div",{className:"alertMessage",children:Object(G.jsx)(p.a,{severity:q,action:Object(G.jsx)(C.a,{onClick:function(){return A(!1)},style:{cursor:"pointer"}}),sx:{font:"14px Roboto"},children:I})})]})},Ct=a(48),St=a(842),Rt=a(807),Nt=a(87),zt=a.n(Nt);function At(e){return e[0].toUpperCase()+e.slice(1)}var Tt=a(98),Dt=a.n(Tt);a(644),a(645);var It=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),r=Object(d.a)(i,2),s=r[0],b=r[1],O=Object(n.useState)(!1),m=Object(d.a)(O,2),v=m[0],y=m[1],k=Object(n.useState)(""),w=Object(d.a)(k,2),C=w[0],S=w[1],R=Object(u.h)(),N=Object(oe.a)("(max-width:540px)"),z=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getUserHistoryReview().then((function(e){z.current&&function(){var t,a=e.data.userDocs,n=e.data.userReviewDocs,i=[],r=Object(Ct.a)(a);try{var s=function(){var e=t.value;n.forEach((function(t){t._id===e.docId&&i.push(Object(h.a)(Object(h.a)({},t),{},{timeVisited:e.time}))}))};for(r.s();!(t=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}o(i),b(!1)}()})).catch((function(e){y(!0),S(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){z.current=!1}}),[]);var A=function(e){switch(e){case"document":return"Dokument";case"audio":return"Audio";case"video":return"Video";case"image":return"Slika"}},T=a&&a.map((function(e){return{id:e._id,documentName:At(e.documentName),documentType:A(e.fileType),documentLastVisit:e.timeVisited&&Object(G.jsxs)(de.a,{direction:"row",spacing:1,children:[Object(G.jsx)(fe.a,{fontSize:"small"}),Object(G.jsx)(g.a,{fontSize:15,children:Dt()(e.timeVisited).locale("bs").fromNow()})]}),description:e.description&&Object(G.jsx)(Fe.a,{title:e.description,placement:"top-start",children:Object(G.jsx)(f.a,{children:e.description})}),ownership:At(e.ownership),location:At(e.location)}})),D={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!N&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista posljednjih posje\u0107enih dokumenata je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{className:"historyPage",children:s?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[v&&Object(G.jsx)(ie.a,{open:v,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return y(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return y(!1)},severity:"error",sx:{width:"100%"},children:C})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(fe.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Historija pregleda"})]})]})}),Object(G.jsx)(zt.a,{columns:[{title:"Naziv dokumenta",field:"documentName",sorting:!1,width:"20%"},{title:"Tip dokumenta",field:"documentType",sorting:!1,width:"10%"},{title:"Opis",field:"description",sorting:!1,width:"35%",align:"left",searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200}},{title:"Posljednji pregled",field:"documentLastVisit",sorting:!1},{title:"Vlasni\u0161tvo",field:"ownership",sorting:!1},{title:"Lokacija",field:"location",sorting:!1}],data:T,actions:[{icon:function(){return Object(G.jsx)(Rt.a,{})},tooltip:"Pogledati",onClick:function(e,t){return R("/pregled/".concat(t.id))}}],title:"Lista posljednjih posje\u0107enih dokumenata",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!1,pageSizeOptions:[5,10,20],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:{font:"15px Roboto"},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:15}},localization:D,style:{marginTop:10}})]})})},Pt=a(411),Mt=a.n(Pt),Bt=a(20),qt=a(403),Wt=a(809),Ft=a(810),Et=a(811),Lt=a(812),Vt=a(813),Ut=Object(Z.b)({name:"modalResponse",initialState:{isModalResAlertVisible:!1,modalResMessage:"",modalAlertType:"success"},reducers:{setIsModalResAlertVisible:function(e){e.isModalResAlertVisible=!0},setModalResMessage:function(e,t){e.modalResMessage=t.payload},setModalAlertType:function(e,t){e.modalAlertType=t.payload},setIsModalResAlertHidden:function(e){e.isModalResAlertVisible=!1}}}),Kt=Ut.actions,Gt=Ut.reducer;var Ht=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.c)(),s=null===e||void 0===e?void 0:e.selected,j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=s.id,t.next=4,K.deactivateUser({userId:a}).then((function(t){i(!1),r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("success")),r(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.user,!0)})).catch((function(t){r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("error")),r(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite deaktivirati ovog korisnika?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var _t=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.c)(),s=null===e||void 0===e?void 0:e.selected,j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=s.id,t.next=4,K.activateUser({userId:a}).then((function(t){i(!1),r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("success")),r(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.user,!0)})).catch((function(t){r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("error")),r(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite aktivirati ovog korisnika?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var Zt=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.c)(),s=null===e||void 0===e?void 0:e.selected,j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=s.id,t.next=4,K.removeUser(a).then((function(t){i(!1),r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("success")),r(Kt.setModalResMessage(t.data.message)),e.onClose(s,!0)})).catch((function(t){r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("error")),r(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite izbrisati ovog korisnika?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var Jt=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.c)(),s=null===e||void 0===e?void 0:e.selected,j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=s._id,t.next=4,K.userEditorAdd({userId:a}).then((function(t){i(!1),r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("success")),r(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.user,!0)})).catch((function(t){r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("error")),r(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite dodati ovog korisnika kao urednika?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var Yt=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.c)(),s=null===e||void 0===e?void 0:e.selected,j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=s._id,t.next=4,K.userEditorRemove({userId:a}).then((function(t){i(!1),r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("success")),r(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.user,!0)})).catch((function(t){r(Kt.setIsModalResAlertVisible()),r(Kt.setModalAlertType("error")),r(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite ukloniti ovog korisnika kao urednika?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})},Qt=a(317),$t=a(323),Xt=a(716),ea=a(808),ta=Object(he.a)((function(e){return{resetBtn:{textTransform:"none",fontWeight:"bold",height:40,marginTop:20,"@media (max-width: 600px)":{marginLeft:10,marginTop:0,marginBottom:10}},selectField:{margin:10,width:300,"@media (max-width: 300px)":{width:200}}}}));var aa=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),o=a[0],i=a[1],r=ta(),s=function(e){switch(e){case"admin":return"Admin";case"editor":return"Urednik";case"reader":return"\u010citalac"}};return Object(G.jsx)("div",{children:Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,sx:{padding:1},children:[Object(G.jsx)(x.a,{item:!0,xs:16,sm:12,children:Object(G.jsxs)(nt.a,{className:r.selectField,children:[Object(G.jsx)(Qt.a,{id:"demo-multiple-name-label",children:"Filter rola korisnika"}),Object(G.jsx)($t.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:o,onChange:function(t){var a=t.target.value;i(a),e.onFilterUsers(a)},input:Object(G.jsx)(Xt.a,{label:"Filter rola korisnika"}),renderValue:function(e){return Object(G.jsx)(f.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(G.jsx)(qt.a,{label:s(e)},e)}))})},children:["admin","editor","reader"].map((function(e,t){return Object(G.jsx)(ue.a,{value:e,children:s(e)},t)}))})]})}),o.length>0&&Object(G.jsx)(x.a,{item:!0,xs:16,sm:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(ea.a,{}),onClick:function(){e.onResetFilter(),i([])},className:r.resetBtn,children:"Reset"})})]})})};var na=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),r=Object(d.a)(i,2),s=r[0],j=r[1],u=Object(n.useState)(!1),h=Object(d.a)(u,2),O=h[0],m=h[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),g=v[0],y=v[1],w=Object(n.useState)(!1),C=Object(d.a)(w,2),S=C[0],R=C[1],N=Object(n.useState)(!1),z=Object(d.a)(N,2),A=z[0],T=z[1],D=Object(n.useState)(!1),I=Object(d.a)(D,2),P=I[0],M=I[1],B=Object(n.useState)(null),q=Object(d.a)(B,2),W=q[0],F=q[1],E=Object(n.useState)(!1),L=Object(d.a)(E,2),V=L[0],U=L[1],_=Object(n.useState)(!1),Z=Object(d.a)(_,2),J=Z[0],Y=Z[1],Q=Object(n.useState)([]),$=Object(d.a)(Q,2),X=$[0],ee=$[1],te=Object(oe.a)("(max-width:540px)"),ae=Object(b.d)((function(e){return e.requests.allRequests})),ne=Object(b.c)(),re=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getAllUsers().then((function(e){re.current&&(o(e.data.allUsers),ee(e.data.allUsers),j(!1))})).catch((function(e){var t;m(!0),y(500===(null===(t=e.response)||void 0===t?void 0:t.status)?"Konekcija sa serverom nije uspostavljena":e.response.data.message),j(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){re.current=!1}}),[]);var se=function(e){switch(e){case"admin":return"Admin";case"editor":return"Urednik";case"reader":return"\u010citalac"}},ce=function(e){var t=e.removed;return"admin"===e.role?Object(G.jsx)(k.a,{disabled:!0,children:Object(G.jsx)(Wt.a,{})}):"editor"===e.role?Object(G.jsx)(k.a,{disabled:t,onClick:function(){return t=e,Y(!0),void F(t);var t},children:Object(G.jsx)(Wt.a,{style:{color:!t&&"#00ab55",cursor:"pointer"}})}):Object(G.jsx)(k.a,{disabled:t,onClick:function(){return t=e,U(!0),void F(t);var t},children:Object(G.jsx)(Ft.a,{})})},le=a&&a.map((function(e){return{id:e._id,firstLastName:At(e.firstName)+" "+At(e.lastName),email:e.email,role:se(e.role),phoneNumber:e.phoneNumber,dob:He(e.dob),gender:"male"===e.gender?"M":"\u017d",country:e.country,organization:At(e.organization),registrationPurpose:e.registrationPurpose,editor:ce(e),removed:e.removed,status:e.removed?Object(G.jsx)(qt.a,{label:"Neaktivan",style:{color:"#B72136",backgroundColor:"#FFE7D9",fontWeight:"bold"},size:"small"}):Object(G.jsx)(qt.a,{label:"Aktivan",style:{color:"#007b55",backgroundColor:"#C8FACD",fontWeight:"bold"},size:"small"})}})),de={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!te&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista korisnika je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{children:s?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[O&&Object(G.jsx)(ie.a,{open:O,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return m(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return m(!1)},severity:"error",sx:{width:"100%"},children:g})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsx)(aa,{onFilterUsers:function(e){if(e.length>0){var t,a=[],n=Object(Ct.a)(X);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.includes(i.role)&&a.push(i)}}catch(r){n.e(r)}finally{n.f()}o(a)}else o(X)},onResetFilter:function(){return o(X)}})}),Object(G.jsx)(zt.a,{columns:[{title:"Ime i prezime",field:"firstLastName",sorting:!0,width:"10%"},{title:"Email",field:"email"},{title:"Broj telefona",field:"phoneNumber",width:"10%"},{title:"Datum ro\u0111enja",field:"dob",searchable:!1,width:"10%"},{title:"Spol",field:"gender",searchable:!1,width:"3%"},{title:"Dr\u017eava",field:"country"},{title:"Organizacija",field:"organization",sorting:!1},{title:"Svrha istra\u017eivanja",field:"registrationPurpose",sorting:!1,searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:150}},{title:"Rola",field:"role",searchable:!1,width:"3%"},{title:"Status",field:"status",searchable:!1,sorting:!1},{title:"Urednik",field:"editor",searchable:!1,sorting:!1}],data:le,actions:[function(e){return{icon:function(){return e.removed?Object(G.jsx)(Et.a,{sx:{fontSize:30}}):Object(G.jsx)(Lt.a,{sx:{fontSize:30,color:"Admin"!==e.role&&"green"}})},tooltip:"Admin"===e.role||e.removed?"":"Deaktivirati",onClick:function(t,a){return e.removed?function(e){T(!0),F(e)}(a):function(e){R(!0),F(e)}(a)},disabled:"Admin"===e.role}},function(e){return{icon:function(){return Object(G.jsx)(Vt.a,{})},tooltip:"Admin"===e.role||e.removed?"":"Izbrisati",onClick:function(e,t){return function(e){M(!0),F(e)}(t)},disabled:"Admin"===e.role}}],title:"Lista korisnika",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20,25,50,100],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:function(e){return{color:e.removed&&"grey",font:"15px Roboto"}},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:10}},localization:de}),S&&Object(G.jsx)(Ht,{visible:S,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.removed=!0})),o(n)}R(!1),F(null)},selected:W}),A&&Object(G.jsx)(_t,{visible:A,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.removed=!1})),o(n)}T(!1),F(null)},selected:W}),P&&Object(G.jsx)(Zt,{visible:P,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);o(n.filter((function(t){return t._id!==e.id})));var i=Object(Bt.a)(ae);ne(Je.setAllRequests(i.filter((function(t){var a;return(null===(a=t.user)||void 0===a?void 0:a._id)!==e.id}))))}M(!1),F(null)},selected:W}),V&&Object(G.jsx)(Jt,{visible:V,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.role="editor"})),o(n)}U(!1),F(null)},selected:W}),J&&Object(G.jsx)(Yt,{visible:J,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.role="reader"})),o(n)}Y(!1),F(null)},selected:W})]})})},oa=(a(646),a(814));var ia=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.selected,s=Object(b.c)(),j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=r._id,t.next=4,K.approvePublicAccess({docId:a}).then((function(t){i(!1),s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("success")),s(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.document,!0)})).catch((function(t){s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("error")),s(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite odobriti javni pristup ovom dokumentu?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var ra=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.selected,s=Object(b.c)(),j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=r._id,t.next=4,K.forbidPublicAccess({docId:a}).then((function(t){i(!1),s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("success")),s(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.document,!0)})).catch((function(t){s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("error")),s(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite zabraniti javni pristup ovom dokumentu?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})};var sa=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.selected,s=Object(b.c)(),j=function(){var t=Object(l.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),a=r.id,t.next=4,K.deleteDocument({docId:a}).then((function(t){i(!1),s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("success")),s(Kt.setModalResMessage(t.data.message)),e.onClose(t.data.document,!0)})).catch((function(t){s(Kt.setIsModalResAlertVisible()),s(Kt.setModalAlertType("error")),s(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(I.a,{children:Object(G.jsx)(P.a,{children:"Da li \u017eelite u\u010diniti ovaj dokument neaktivnim?"})}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:j,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Da"})]})]})]})},ca=a(838),la=a(834),da=Object(he.a)((function(e){return{filterBtns:{textTransform:"none",fontWeight:"bold"},filterBtnsField:{"@media (max-width: 900px)":{marginTop:10}}}}));var ja=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)([]),c=Object(d.a)(s,2),l=c[0],j=c[1],u=Object(n.useState)(""),b=Object(d.a)(u,2),p=b[0],O=b[1],m=Object(n.useState)([null,null]),y=Object(d.a)(m,2),k=y[0],C=y[1],S=da();Object(n.useEffect)((function(){j([0,null===e||void 0===e?void 0:e.biggestDoc])}),[null===e||void 0===e?void 0:e.biggestDoc]);var R=function(e){switch(e){case"image":return"Slika";case"video":return"Video";case"audio":return"Audio";case"document":return"Dokument"}},N=k.every((function(e){return null!==e&&void 0!==e}))||i.length>0||l.some((function(t){return 0!==t&&t!==(null===e||void 0===e?void 0:e.biggestDoc)}))||p;return Object(G.jsx)("div",{children:Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,sx:{marginTop:1,marginBottom:1},children:[Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,md:4,children:Object(G.jsxs)(nt.a,{fullWidth:!0,children:[Object(G.jsx)(Qt.a,{id:"demo-multiple-name-label",children:"Tip dokumenta"}),Object(G.jsx)($t.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:i,onChange:function(e){var t=e.target.value;r(t)},input:Object(G.jsx)(Xt.a,{label:"Tip dokumenta"}),renderValue:function(e){return Object(G.jsx)(f.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(G.jsx)(qt.a,{label:R(e)},e)}))})},children:["image","video","audio","document"].map((function(e,t){return Object(G.jsx)(ue.a,{value:e,children:R(e)},t)}))})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,md:4,children:Object(G.jsxs)(f.a,{sx:{width:"100%"},children:[Object(G.jsx)(g.a,{children:"Veli\u010dina dokumenta"}),Object(G.jsx)(ca.a,{value:l,onChange:function(e,t){j(t)},valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat((e/1e6).toFixed(2)," MB")},max:null===e||void 0===e?void 0:e.biggestDoc,step:1e3})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,md:4,children:Object(G.jsxs)(nt.a,{fullWidth:!0,children:[Object(G.jsx)(Qt.a,{id:"demo-simple-select-label",children:"Vrsta vrijednosti"}),Object(G.jsxs)($t.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:p,onChange:function(e){O(e.target.value)},input:Object(G.jsx)(Xt.a,{label:"Vrsta vrijednosti"}),children:[Object(G.jsx)(ue.a,{value:"public",children:"Javno dostupan"}),Object(G.jsx)(ue.a,{value:"private",children:"Ograni\u010den pristup"})]})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,md:4,children:Object(G.jsx)(xt.b,{dateAdapter:mt.a,children:Object(G.jsx)(la.a,{startText:"Od",endText:"Do",inputFormat:"dd/MM/yyyy",value:k,onChange:function(e){C(e)},renderInput:function(e,t){return Object(G.jsxs)(o.a.Fragment,{children:[Object(G.jsx)(v.a,Object(h.a)({},e)),Object(G.jsx)(f.a,{sx:{mx:2},children:" - "}),Object(G.jsx)(v.a,Object(h.a)({},t))]})}})})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-end",children:N&&Object(G.jsxs)(de.a,{spacing:2,direction:"row",className:S.filterBtnsField,children:[Object(G.jsx)(w.a,{variant:"outlined",className:S.filterBtns,onClick:function(){r([]),C([null,null]),j([0,null===e||void 0===e?void 0:e.biggestDoc]),O(""),e.onResetFilters()},children:"Reset"}),Object(G.jsx)(w.a,{variant:"contained",className:S.filterBtns,onClick:function(){e.onApplyFilters({docValue:p,rangeValue:l,fileTypeValues:i,docLastChangeValue:k})},children:"Filter"})]})})]})})},ua=Object(he.a)((function(e){return{newDocBtn:{textTransform:"none",fontWeight:"bold",marginBottom:15}}}));var ba=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),r=Object(d.a)(i,2),s=r[0],j=r[1],b=Object(n.useState)(!0),h=Object(d.a)(b,2),O=h[0],m=h[1],v=Object(n.useState)(!1),g=Object(d.a)(v,2),y=g[0],C=g[1],S=Object(n.useState)(""),R=Object(d.a)(S,2),N=R[0],z=R[1],A=Object(n.useState)(null),T=Object(d.a)(A,2),D=T[0],I=T[1],P=Object(n.useState)(!1),M=Object(d.a)(P,2),B=M[0],q=M[1],W=Object(n.useState)(!1),F=Object(d.a)(W,2),E=F[0],L=F[1],V=Object(n.useState)(!1),U=Object(d.a)(V,2),_=U[0],Z=U[1],J=Object(n.useState)(0),Y=Object(d.a)(J,2),Q=Y[0],$=Y[1],X=Object(oe.a)("(max-width:540px)"),ee=Object(u.h)(),te=ua(),ae=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getAllDocuments().then((function(e){if(ae.current){o(e.data.allDocuments),j(e.data.allDocuments);var t,a=[],n=Object(Ct.a)(e.data.allDocuments);try{for(n.s();!(t=n.n()).done;){var i=t.value;a.push(Number(i.documentSize))}}catch(r){n.e(r)}finally{n.f()}$(Math.max.apply(Math,a)),m(!1)}})).catch((function(e){var t;C(!0),z(500===(null===(t=e.response)||void 0===t?void 0:t.status)?"Konekcija sa serverom nije uspostavljena":e.response.data.message),m(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){ae.current=!1}}),[]);var ne=function(e){switch(e){case"document":return"Dokument";case"audio":return"Audio";case"video":return"Video";case"image":return"Slika"}},re=a&&a.map((function(e){return{id:e._id,documentName:At(e.documentName),documentType:ne(e.fileType),size:(t=e.documentSize,(null===t||void 0===t?void 0:t.length)>6?"".concat(Number(t/1e6).toFixed(2)," MB"):(null===t||void 0===t?void 0:t.length)>9?"".concat(Number(t/1e9).toFixed(2)," GB"):"".concat(Number(t/1e3).toFixed(2)," kB")),initialSize:e.documentSize,active:e.active?Object(G.jsx)(qt.a,{label:"Aktivan",style:{color:"#007b55",backgroundColor:"#C8FACD",fontWeight:"bold"},size:"small"}):Object(G.jsx)(qt.a,{label:"Neaktivan",style:{color:"#B72136",backgroundColor:"#FFE7D9",fontWeight:"bold"},size:"small"}),removed:!e.active,description:e.description&&Object(G.jsx)(Fe.a,{title:e.description,placement:"top-start",children:Object(G.jsx)(f.a,{children:e.description})}),ownership:At(e.ownership),location:At(e.location),publicAccess:!0===e.publicAccess?Object(G.jsx)(k.a,{onClick:function(){return t=e,L(!0),void I(t);var t},disabled:!e.active,children:Object(G.jsx)(Wt.a,{style:{color:e.active&&"#00ab55",cursor:"pointer"}})}):Object(G.jsx)(k.a,{onClick:function(){return t=e,q(!0),void I(t);var t},disabled:!e.active,children:Object(G.jsx)(Ft.a,{style:{cursor:"pointer"}})})};var t})),se={actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20,25,50,100],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:function(e){return{backgroundColor:(null===D||void 0===D?void 0:D._id)===e.id?"#ccc":"",color:e.removed&&"grey",font:"15px Roboto"}},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:10}},ce={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!X&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista dokumenata je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{children:O?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[y&&Object(G.jsx)(ie.a,{open:y,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return C(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return C(!1)},severity:"error",sx:{width:"100%"},children:N})}),Object(G.jsx)(x.a,{children:Object(G.jsx)(ja,{biggestDoc:Q,onApplyFilters:function(e){var t=e.docLastChangeValue,a=e.docValue,n=e.fileTypeValues,i=e.rangeValue,r=Object(Bt.a)(s);if(n.length>0&&(r=r.filter((function(e){return n.includes(e.fileType)&&e}))),i.length>0&&(r=r.filter((function(e){return Number(e.documentSize)>=i[0]&&Number(e.documentSize)<=i[1]}))),a&&(r=r.filter((function(e){return"public"===a?e.publicAccess:!e.publicAccess}))),null!==(t[0]&&t[1])){var c=new Date(t[0]),l=new Date(t[1]);r=r.filter((function(e){return c<=new Date(e.lastEdit).getTime()&&l>=new Date(e.lastEdit).getTime()}))}o(r)},onResetFilters:function(){return o(s)}})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-end",children:Object(G.jsx)(w.a,{variant:"contained",className:te.newDocBtn,onClick:function(){return ee("/novidokument")},children:"Novi dokument"})}),Object(G.jsx)(zt.a,{columns:[{title:"Naziv dokumenta",field:"documentName",width:"15%"},{title:"Tip dokumenta",field:"documentType",width:"10%"},{title:"Veli\u010dina",field:"size",type:"numeric",align:"left",searchable:!1,customSort:function(e,t){return e.initialSize-t.initialSize}},{title:"Status",field:"active",align:"left",searchable:!1,sorting:!1},{title:"Opis",field:"description",sorting:!1,align:"left",searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200}},{title:"Vlasni\u0161tvo",field:"ownership"},{title:"Lokacija",field:"location"},{title:"Dozvoli javni pregled",field:"publicAccess",width:"8%",align:"center",sorting:!1}],data:re,actions:[{icon:function(){return Object(G.jsx)(Rt.a,{})},tooltip:"Pogledati",onClick:function(e,t){return ee("/pregled/".concat(t.id))}},{icon:function(){return Object(G.jsx)(oa.a,{})},tooltip:"Urediti",onClick:function(e,t){return ee("/izmjena/".concat(t.id))}},function(e){return{icon:function(){return Object(G.jsx)(Vt.a,{})},tooltip:e.removed?"":"Deaktivirati",onClick:function(e,t){return function(e){Z(!0),I(e)}(t)},disabled:e.removed}}],title:"Lista dokumenata",options:se,localization:ce}),B&&Object(G.jsx)(ia,{visible:B,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.publicAccess=!0})),o(n)}q(!1),I(null)},selected:D}),E&&Object(G.jsx)(ra,{visible:E,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.publicAccess=!1})),o(n)}L(!1),I(null)},selected:D}),_&&Object(G.jsx)(sa,{visible:_,onClose:function(e,t){if(t){var n=Object(Bt.a)(a);n.forEach((function(t){if(t._id===e._id)return t.active=!1})),o(n)}Z(!1),I(null)},selected:D})]})})};var ha=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),r=Object(d.a)(i,2),s=r[0],j=r[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),O=x[0],m=x[1],v=Object(n.useState)(""),g=Object(d.a)(v,2),y=g[0],k=g[1],w=Object(b.d)((function(e){return e.auth.currentUser})),C=Object(oe.a)("(max-width:540px)"),S=Object(u.h)(),R=Object(n.useRef)(!0);Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getApprovedDocuments().then((function(e){R.current&&(o(e.data.userFilteredDocs),j(!1))})).catch((function(e){var t;m(!0),k(500===(null===(t=e.response)||void 0===t?void 0:t.status)?"Konekcija sa serverom nije uspostavljena":e.response.data.message),j(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){R.current=!1}}),[]);var N=function(e){switch(e){case"document":return"Dokument";case"audio":return"Audio";case"video":return"Video";case"image":return"Slika"}},z=a&&a.map((function(e){return{id:e._id,documentName:At(e.documentName),documentType:N(e.fileType),description:e.description&&Object(G.jsx)(Fe.a,{title:e.description,placement:"top-start",children:Object(G.jsx)(f.a,{children:e.description})}),ownership:At(e.ownership),location:At(e.location),status:(t=e._id,w.approvedDocuments.includes(t)?Object(G.jsx)(qt.a,{label:"Odobren",style:{color:"#04297A",backgroundColor:"#D0F2FF",fontWeight:"bold"},size:"small"}):w.pendingDocuments.includes(t)?Object(G.jsx)(qt.a,{label:"Na \u010dekanju",style:{color:"#B78103",backgroundColor:"#FFF7CD",fontWeight:"bold"},size:"small"}):Object(G.jsx)(qt.a,{label:"Javno dostupan",style:{color:"#007b55",backgroundColor:"#C8FACD",fontWeight:"bold"},size:"small"}))};var t})),A={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!C&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Va\u0161a lista dokumenata je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{children:s?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[O&&Object(G.jsx)(ie.a,{open:O,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return m(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return m(!1)},severity:"error",sx:{width:"100%"},children:y})}),Object(G.jsx)(zt.a,{columns:[{title:"Naziv dokumenta",field:"documentName",width:"15%"},{title:"Tip dokumenta",field:"documentType",width:"10%"},{title:"Opis",field:"description",sorting:!1,width:"35%",align:"left",searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200}},{title:"Vlasni\u0161tvo",field:"ownership"},{title:"Lokacija",field:"location"},{title:"Status",field:"status",align:"left",searchable:!1,sorting:!1}],data:z,actions:[{icon:function(){return Object(G.jsx)(Rt.a,{})},tooltip:"Pogledati",onClick:function(e,t){return S("/pregled/".concat(t.id))}}],title:"Va\u0161a lista dokumenata",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20,25,50,100],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:{font:"15px Roboto"},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:10}},localization:A,style:{marginTop:10}})]})})};var pa=function(){var e=Object(b.d)((function(e){return e.auth.currentUser}));return Object(G.jsxs)("div",{role:"presentation",className:"homePage",children:[Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsx)(St.a,{"aria-label":"breadcrumb",children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(Mt.a,{sx:{mr:-1.5,marginTop:.1},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Po\u010detna"})]})})}),"admin"===e.role&&Object(G.jsx)(na,{}),"editor"===e.role&&Object(G.jsx)(ba,{}),"reader"===e.role&&Object(G.jsx)(ha,{})]})},xa=a(857),Oa=a(148),ma=a.n(Oa),fa=Object(Re.a)(xa.a)((function(e){return{boxShadow:"none",textAlign:"center",padding:e.theme.spacing(5,0),color:"#005249",backgroundColor:"#C8FACD",borderRadius:20}})),va=Object(Re.a)("div")((function(e){var t=e.theme;return{margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:t.spacing(8),height:t.spacing(8),justifyContent:"center",marginBottom:t.spacing(3),color:"#005249",backgroundImage:"linear-gradient(135deg, ".concat(Object(Ke.a)("#005249",0)," 0%, ").concat(Object(Ke.a)("#005249",.24)," 100%)")}}));function ga(e){return Object(G.jsxs)(fa,{children:[Object(G.jsx)(va,{children:Object(G.jsx)(S.a,{style:{color:"#005249"}})}),Object(G.jsx)(g.a,{variant:"h3",children:Object(G.jsx)(ma.a,{end:null===e||void 0===e?void 0:e.totalUsers,duration:2})}),Object(G.jsx)(g.a,{variant:"subtitle2",sx:{opacity:.72,fontWeight:"bold"},children:"Broj korisnika"})]})}var ya=a(815),ka=Object(Re.a)(xa.a)((function(e){return{boxShadow:"none",textAlign:"center",padding:e.theme.spacing(5,0),color:"#04297A",backgroundColor:"#D0F2FF",borderRadius:20}})),wa=Object(Re.a)("div")((function(e){var t=e.theme;return{margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:t.spacing(8),height:t.spacing(8),justifyContent:"center",marginBottom:t.spacing(3),color:"#04297A",backgroundImage:"linear-gradient(135deg, ".concat(Object(Ke.a)("#04297A",0)," 0%, ").concat(Object(Ke.a)("#04297A",.24)," 100%)")}}));function Ca(e){return Object(G.jsxs)(ka,{children:[Object(G.jsx)(wa,{children:Object(G.jsx)(ya.a,{style:{color:"#04297A"}})}),Object(G.jsx)(g.a,{variant:"h3",children:Object(G.jsx)(ma.a,{end:null===e||void 0===e?void 0:e.todayVisit,duration:2})}),Object(G.jsx)(g.a,{variant:"subtitle2",sx:{opacity:.72,fontWeight:"bold"},children:"Broj posjeta u posljednja 24h"})]})}var Sa=Object(Re.a)(xa.a)((function(e){return{boxShadow:"none",textAlign:"center",padding:e.theme.spacing(5,0),color:"#7A4F01",backgroundColor:"#FFF7CD",borderRadius:20}})),Ra=Object(Re.a)("div")((function(e){var t=e.theme;return{margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:t.spacing(8),height:t.spacing(8),justifyContent:"center",marginBottom:t.spacing(3),color:"#7A4F01",backgroundImage:"linear-gradient(135deg, ".concat(Object(Ke.a)("#7A4F01",0)," 0%, ").concat(Object(Ke.a)("#7A4F01",.24)," 100%)")}}));function Na(e){return Object(G.jsxs)(Sa,{children:[Object(G.jsx)(Ra,{children:Object(G.jsx)(ge.a,{style:{color:"#7A4F01"}})}),Object(G.jsx)(g.a,{variant:"h3",children:Object(G.jsx)(ma.a,{end:null===e||void 0===e?void 0:e.totalDocs,duration:2})}),Object(G.jsx)(g.a,{variant:"subtitle2",sx:{opacity:.72,fontWeight:"bold"},children:"Broj dokumenata"})]})}var za=Object(Re.a)(xa.a)((function(e){return{boxShadow:"none",textAlign:"center",padding:e.theme.spacing(5,0),color:"#7A0C2E",backgroundColor:"#FFE7D9",borderRadius:20}})),Aa=Object(Re.a)("div")((function(e){var t=e.theme;return{margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:t.spacing(8),height:t.spacing(8),justifyContent:"center",marginBottom:t.spacing(3),color:"#7A0C2E",backgroundImage:"linear-gradient(135deg, ".concat(Object(Ke.a)("#7A0C2E",0)," 0%, ").concat(Object(Ke.a)("#7A0C2E",.24)," 100%)")}}));function Ta(e){return Object(G.jsxs)(za,{children:[Object(G.jsx)(Aa,{children:Object(G.jsx)(ya.a,{style:{color:"#7A0C2E"}})}),Object(G.jsx)(g.a,{variant:"h3",children:Object(G.jsx)(ma.a,{end:null===e||void 0===e?void 0:e.lastDaysDocVisits,duration:2})}),Object(G.jsx)(g.a,{variant:"subtitle2",sx:{opacity:.72,fontWeight:"bold"},children:"Broj pregledanih dokumenata u posljednja 24h"})]})}var Da=a(88),Ia=a(89),Pa=a.n(Ia),Ma=a(858),Ba=a(49);function qa(){var e=Object(Ba.a)(),t=Object(h.a)({show:!0,label:"Total",color:e.palette.text.secondary},e.typography.subtitle2),a=Object(h.a)({offsetY:8,color:e.palette.text.primary},e.typography.h3);return{chart:{toolbar:{show:!1},zoom:{enabled:!1},foreColor:e.palette.text.disabled,fontFamily:e.typography.fontFamily},states:{hover:{filter:{type:"lighten",value:.04}},active:{filter:{type:"darken",value:.88}}},fill:{opacity:1,gradient:{type:"vertical",shadeIntensity:0,opacityFrom:.4,opacityTo:0,stops:[0,100]}},dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},grid:{strokeDashArray:3,borderColor:e.palette.divider},xaxis:{axisBorder:{show:!1},axisTicks:{show:!1}},markers:{size:0,strokeColors:e.palette.background.paper},tooltip:{x:{show:!1}},legend:{show:!0,fontSize:13,position:"top",horizontalAlign:"right",markers:{radius:12},fontWeight:500,itemMargin:{horizontal:12},labels:{colors:e.palette.text.primary}},plotOptions:{bar:{columnWidth:"28%",borderRadius:4},pie:{donut:{labels:{show:!0,value:a,total:t}}},radialBar:{track:{strokeWidth:"100%",background:e.palette.grey[50016]},dataLabels:{value:a,total:t}},radar:{polygons:{fill:{colors:["transparent"]},strokeColors:e.palette.divider,connectorColors:e.palette.divider}},polarArea:{rings:{strokeColor:e.palette.divider},spokes:{connectorColors:e.palette.divider}}},responsive:[{breakpoint:e.breakpoints.values.sm,options:{plotOptions:{bar:{columnWidth:"40%"}}}},{breakpoint:e.breakpoints.values.md,options:{plotOptions:{bar:{columnWidth:"32%"}}}}]}}var Wa=a(818),Fa=a(3),Ea=a(385),La=a(843),Va=a(816),Ua=a(817);var Ka=function(e){var t=Object(n.useState)({}),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.users;return Object(G.jsx)("div",{children:Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsx)(D.a,{children:"Pregled posjete korisnika u posljednjih 7 dana"}),Object(G.jsx)(I.a,{dividers:!0,children:Object(G.jsx)(Ve.a,{sx:{width:"100%",maxWidth:"100%"},component:"nav","aria-labelledby":"nested-list-subheader",children:null===r||void 0===r?void 0:r.map((function(e,t){return Object(G.jsxs)("div",{children:[Object(G.jsxs)(qe.a,{onClick:function(){return e=t,void i((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(Fa.a)({},e,!t[e]))}));var e},children:[Object(G.jsx)(be.a,{children:Object(G.jsx)(Va.a,{})}),Object(G.jsx)(Ee.a,{primary:He(Dt()().subtract(t,"days"))}),o[t]?Object(G.jsx)(Ua.a,{}):Object(G.jsx)(te.a,{})]}),Object(G.jsx)(Ea.a,{in:o[t],timeout:"auto",unmountOnExit:!0,children:Object(G.jsx)(Ve.a,{disablePadding:!0,children:e.length>0?Object(G.jsxs)("div",{children:[Object(G.jsxs)(La.a,{children:[Object(G.jsx)(be.a,{}),Object(G.jsx)(Ee.a,{primary:"Ukupno ".concat(e.length," ").concat(e.length>1?"korisnika:":"korisnik:"),sx:{color:"#393e46"}})]}),e.map((function(e,t){return Object(G.jsxs)(La.a,{sx:{ml:1},children:[Object(G.jsx)(be.a,{}),Object(G.jsx)(Ee.a,{secondary:"- ".concat(e)})]},t)}))]}):Object(G.jsxs)(La.a,{children:[Object(G.jsx)(be.a,{}),Object(G.jsx)(Ee.a,{secondary:"Nema prijavljenih korisnika"})]})})})]},t)}))})}),Object(G.jsx)(M.a,{children:Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Zatvori"})})]})})};function Ga(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.lastDaysAppVisits,s=null===e||void 0===e?void 0:e.lastDaysAppVisitsUsers,c=[{name:"Posjeta",type:"column",data:r},{type:"area",data:r}],l=Object(Da.merge)(qa(),{stroke:{width:[0,2,3]},plotOptions:{bar:{columnWidth:"5%",borderRadius:4}},fill:{type:["solid","gradient","solid"]},colors:["#1890FF","#00AB55"],labels:[He(Dt()().subtract(6,"days")),He(Dt()().subtract(5,"days")),He(Dt()().subtract(4,"days")),He(Dt()().subtract(3,"days")),He(Dt()().subtract(2,"days")),He(Dt()().subtract(1,"days")),He(Dt()().subtract(0,"days"))],legend:{show:!1},tooltip:{shared:!1,intersect:!1,y:{formatter:function(e){return"undefined"!==typeof e?"".concat(e):e}}}});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Posjeta posljednjih 7 dana",action:Object(G.jsx)(Fe.a,{title:"Pregled",placement:"top",children:Object(G.jsx)(k.a,{onClick:function(){i(!0)},children:Object(G.jsx)(Wa.a,{})})})}),Object(G.jsx)(f.a,{sx:{p:3,pb:1},dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"line",series:c,options:l,height:364})}),o&&Object(G.jsx)(Ka,{visible:o,onClose:function(){i(!1)},users:s})]})}var Ha=Object(Re.a)("div")((function(e){var t=e.theme;return{height:372,marginTop:t.spacing(5),"& .apexcharts-canvas svg":{height:372},"& .apexcharts-canvas svg,.apexcharts-canvas foreignObject":{overflow:"visible"},"& .apexcharts-legend":{height:72,alignContent:"center",position:"relative !important",borderTop:"solid 1px ".concat(t.palette.divider),top:"calc(".concat(300,"px) !important")}}}));function _a(e){var t=null===e||void 0===e?void 0:e.usersAge,a=Object(Da.merge)(qa(),{colors:["#00AB55","#1890FF","#FFC107","#FF4842","#826AF9","#FF9933"],labels:["Ispod 20","20-30","30-40","40-50","50-60","Iznad 60"],legend:{floating:!0,horizontalAlign:"center"},dataLabels:{enabled:!0,dropShadow:{enabled:!1}},tooltip:{fillSeriesColor:!1,y:{title:{formatter:function(e){return"".concat(e,": korisnika")}}}},plotOptions:{pie:{donut:{labels:{show:!1}}}}});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Pregled korisnika po godinama"}),Object(G.jsx)(Ha,{dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"pie",series:t,options:a,height:280})})]})}function Za(e){var t,a=null===e||void 0===e?void 0:e.usersCountries,n=[],o=Object(Ct.a)(a);try{for(o.s();!(t=o.n()).done;){var i=t.value;n.unshift(i)}}catch(c){o.e(c)}finally{o.f()}var r=[{data:n.map((function(e){return e[1]}))}],s=Object(Da.merge)(qa(),{tooltip:{marker:{show:!1},y:{title:{formatter:function(){return"Broj korisnika"}}}},colors:["#00AB55"],plotOptions:{bar:{horizontal:!0,barHeight:"7%",borderRadius:2}},xaxis:{categories:n.map((function(e){return e[0]}))}});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Pregled korisnika po dr\u017eavama"}),Object(G.jsx)(f.a,{sx:{mx:3},dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"bar",series:r,options:s,height:396})})]})}var Ja=Object(Re.a)("div")((function(e){var t=e.theme;return{height:372,marginTop:t.spacing(5),"& .apexcharts-canvas svg":{height:372},"& .apexcharts-canvas svg,.apexcharts-canvas foreignObject":{overflow:"visible"},"& .apexcharts-legend":{height:72,alignContent:"center",position:"relative !important",borderTop:"solid 1px ".concat(t.palette.divider),top:"calc(".concat(300,"px) !important")}}}));function Ya(e){var t=[null===e||void 0===e?void 0:e.publicDocs,null===e||void 0===e?void 0:e.privateDocs],a=Object(Da.merge)(qa(),{colors:["#FF9933","#826AF9"],labels:["Javni","Privatni"],legend:{floating:!0,horizontalAlign:"center"},dataLabels:{enabled:!0,dropShadow:{enabled:!1}},tooltip:{fillSeriesColor:!1,y:{title:{formatter:function(e){return"".concat(e)}}}},plotOptions:{pie:{donut:{labels:{show:!1}}}}});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Pregled dokumenata po pristupu"}),Object(G.jsx)(Ja,{dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"pie",series:t,options:a,height:280})})]})}a(649);function Qa(e){var t=null===e||void 0===e?void 0:e.mostAccessedDocs,a=[{data:t.map((function(e){return e.visits}))}],n=Object(Da.merge)(qa(),{tooltip:{marker:{show:!1},y:{title:{formatter:function(){return"Broj posjeta"}}}},colors:["#1890FF"],plotOptions:{bar:{columnWidth:"12%",borderRadius:4}},labels:t.map((function(e){return e.documentName}))});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Najposje\u0107eniji dokumenti"}),Object(G.jsx)(f.a,{sx:{mx:3},dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"bar",series:a,options:n,height:396})})]})}function $a(e){var t=null===e||void 0===e?void 0:e.mostSearchedDocs,a=[{data:t.map((function(e){return e.searchNumber}))}],n=Object(Da.merge)(qa(),{tooltip:{marker:{show:!1},y:{title:{formatter:function(){return"Broj tra\u017eenja"}}}},colors:["#00AB55"],plotOptions:{bar:{columnWidth:"12%",borderRadius:4}},labels:t.map((function(e){return e.documentName}))});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Najtra\u017eeniji dokumenti po klju\u010dnim rije\u010dima"}),Object(G.jsx)(f.a,{sx:{mx:3},dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"bar",series:a,options:n,height:396})})]})}function Xa(e){var t=null===e||void 0===e?void 0:e.mostDownloadedDocs,a=[{data:t.map((function(e){return e.downloadNumber}))}],n=Object(Da.merge)(qa(),{tooltip:{marker:{show:!1},y:{title:{formatter:function(){return"Broj preuzimanja"}}}},colors:["#FFC107"],plotOptions:{bar:{columnWidth:"8%",borderRadius:4}},labels:t.map((function(e){return e.documentName}))});return Object(G.jsxs)(xa.a,{children:[Object(G.jsx)(Ma.a,{subheader:"Dokumenti sa najvi\u0161e preuzimanja"}),Object(G.jsx)(f.a,{sx:{mx:3},dir:"ltr",children:Object(G.jsx)(Pa.a,{type:"bar",series:a,options:n,height:396})})]})}var en=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(0),r=Object(d.a)(i,2),s=r[0],u=r[1],b=Object(n.useState)([]),h=Object(d.a)(b,2),O=h[0],m=h[1],f=Object(n.useState)([]),v=Object(d.a)(f,2),y=v[0],k=v[1],w=Object(n.useState)([]),C=Object(d.a)(w,2),S=C[0],R=C[1],N=Object(n.useState)(0),z=Object(d.a)(N,2),A=z[0],T=z[1],D=Object(n.useState)(0),I=Object(d.a)(D,2),P=I[0],M=I[1],B=Object(n.useState)([]),q=Object(d.a)(B,2),W=q[0],F=q[1],E=Object(n.useState)([]),L=Object(d.a)(E,2),V=L[0],U=L[1],_=Object(n.useState)([]),Z=Object(d.a)(_,2),J=Z[0],Y=Z[1],Q=Object(n.useState)([]),$=Object(d.a)(Q,2),X=$[0],ee=$[1],te=Object(n.useState)(0),ae=Object(d.a)(te,2),ne=ae[0],oe=ae[1],re=Object(n.useState)(0),se=Object(d.a)(re,2),ce=se[0],le=se[1],je=Object(n.useState)(!0),ue=Object(d.a)(je,2),be=ue[0],he=ue[1],pe=Object(n.useState)(!1),xe=Object(d.a)(pe,2),Oe=xe[0],fe=xe[1],ge=Object(n.useState)(""),ye=Object(d.a)(ge,2),ke=ye[0],we=ye[1],Ce=Object(n.useRef)(!0);return Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getDocsStats().then((function(e){Ce.current&&(o(e.data.publicDocs),u(e.data.privateDocs),m(e.data.sortedDocs),k(e.data.mostSearchedDocs),R(e.data.mostDownloadedDocs),M(e.data.totalDocs),T(e.data.lastDayDocsVisits))})).catch((function(e){fe(!0),we(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getUsersStats().then((function(e){Ce.current&&(F(e.data.lastDaysAppVisits),U(e.data.lastDaysAppVisitsUsers),le(e.data.todayVisit),Y(e.data.usersAge),ee(e.data.sortedCountries),oe(e.data.totalUsers),he(!1))})).catch((function(e){fe(!0),we(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),he(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),t(),function(){Ce.current=!1}}),[]),Object(G.jsx)("div",{className:"statisticsPage",children:be?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[Oe&&Object(G.jsx)(ie.a,{open:Oe,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return fe(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return fe(!1)},severity:"error",sx:{width:"100%"},children:ke})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(ve.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Statistika"})]})]})}),Object(G.jsx)("div",{className:"statNumbers",children:Object(G.jsxs)(x.a,{container:!0,spacing:3,children:[Object(G.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,children:Object(G.jsx)(ga,{totalUsers:ne})}),Object(G.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,children:Object(G.jsx)(Ca,{todayVisit:ce})}),Object(G.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,children:Object(G.jsx)(Na,{totalDocs:P})}),Object(G.jsx)(x.a,{item:!0,xs:12,sm:6,md:3,children:Object(G.jsx)(Ta,{lastDaysDocVisits:A})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:8,children:Object(G.jsx)(Ga,{lastDaysAppVisits:W,lastDaysAppVisitsUsers:V})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:4,children:Object(G.jsx)(_a,{usersAge:J})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:8,children:Object(G.jsx)(Za,{usersCountries:X})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:4,children:Object(G.jsx)(Ya,{publicDocs:a,privateDocs:s})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:6,children:Object(G.jsx)(Qa,{mostAccessedDocs:O})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:6,children:Object(G.jsx)($a,{mostSearchedDocs:y})}),Object(G.jsx)(x.a,{item:!0,xs:12,md:6,lg:12,children:Object(G.jsx)(Xa,{mostDownloadedDocs:S})})]})})]})})},tn=a(321),an=a(861),nn=a(819),on=a(820),rn=a(846),sn=a(859),cn=a(860);a(650);var ln=function(){var e,t,a,o,i=Object(n.useState)(!1),r=Object(d.a)(i,2),s=r[0],j=r[1],u=Object(n.useState)(!1),f=Object(d.a)(u,2),S=f[0],A=f[1],T=Object(n.useState)(!1),D=Object(d.a)(T,2),I=D[0],P=D[1],M=Object(n.useState)(!1),F=Object(d.a)(M,2),E=F[0],L=F[1],V=Object(n.useState)(!1),U=Object(d.a)(V,2),_=U[0],Z=U[1],J=Object(n.useState)("success"),Y=Object(d.a)(J,2),Q=Y[0],$=Y[1],X=Object(n.useState)(""),ee=Object(d.a)(X,2),ae=ee[0],ne=ee[1],oe=Object(n.useState)(!1),re=Object(d.a)(oe,2),se=re[0],ce=re[1],le=Object(b.d)((function(e){return e.auth.currentUser})),de=W.c().shape({currentPassword:W.e().required("Morate unijeti staru \u0161ifru"),password:W.e().required("\u0160ifra je obavezna").max(24,"\u0160ifra mo\u017ee da sadr\u017ei maximalno 24 karaktera").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,"\u0160ifra mora da sadr\u017ei minimalno 8 karaktera, jedno veliko, jedno malo slovo, jedan broj i jedan simbol"),passwordConfirm:W.e().required("Morate potvrditi novu \u0161ifru").oneOf([W.d("password"),null],"\u0160ifre moraju biti iste")}),je=Object(B.e)({resolver:Object(q.a)(de),defaultValues:{currentPassword:"",password:"",passwordConfirm:""}}),ue=je.register,be=je.handleSubmit,he=je.reset,pe=je.formState.errors,xe=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,K.updateUserPassword({currentPassword:t.currentPassword,newPassword:t.password,id:null===le||void 0===le?void 0:le._id}).then((function(e){L(!0),ne(e.data.message),$(e.data.status),he(),Z(!1),ce(!1),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){ne(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena, poku\u0161ajte da osjve\u017eite aplikaciju ili nas kontaktirajte putem info maila."),Z(!0),$(e.response?e.response.data.status:"error")}));case 3:P(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:I,children:Object(G.jsx)(H,{})}),E&&Object(G.jsx)(ie.a,{open:E,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return L(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return L(!1)},severity:Q,sx:{width:"100%",font:"14px Roboto"},children:ae})}),Object(G.jsxs)(rn.a,{expanded:"panel1"===se,onChange:(o="panel1",function(e,t){ce(!!t&&o)}),sx:{m:1,borderRadius:1},children:[Object(G.jsx)(sn.a,{expandIcon:Object(G.jsx)(te.a,{}),children:Object(G.jsx)(g.a,{children:"Promjena \u0161ifre"})}),Object(G.jsx)(cn.a,{sx:{padding:0},children:Object(G.jsxs)("div",{className:"accordionOptions",children:[Object(G.jsxs)(x.a,{container:!0,justifyContent:"center",spacing:2,columns:12,sx:{mb:2,padding:1},children:[Object(G.jsx)(x.a,{item:!0,xs:12,sm:10,md:8,children:_&&Object(G.jsxs)(p.a,{severity:Q,action:Object(G.jsx)(C.a,{onClick:function(){return Z(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),ae,Object(G.jsx)("strong",{children:" Poku\u0161ajte ponovo !"})]})}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:10,md:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"currentPassword",label:"Trenutna \u0161ifra",type:s?"text":"password",fullWidth:!0,required:!0},ue("currentPassword")),{},{error:!!pe.password,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return j(!s)},children:s?Object(G.jsx)(N.a,{style:{color:"#393e46"}}):Object(G.jsx)(z.a,{style:{color:"#393e46"}})})})}})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(e=pe.currentPassword)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:10,md:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"password",label:"Nova \u0161ifra",type:S?"text":"password",fullWidth:!0,required:!0},ue("password")),{},{error:!!pe.password,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return A(!S)},children:S?Object(G.jsx)(N.a,{style:{color:"#393e46"}}):Object(G.jsx)(z.a,{style:{color:"#393e46"}})})})}})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(t=pe.password)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:10,md:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"passwordConfirm",label:"Potvrdite novu \u0161ifru",type:S?"text":"password",fullWidth:!0,required:!0},ue("passwordConfirm")),{},{error:!!pe.passwordConfirm,InputProps:{endAdornment:Object(G.jsx)(y.a,{position:"end",children:Object(G.jsx)(k.a,{"aria-label":"toggle password visibility",onClick:function(){return A(!S)},children:S?Object(G.jsx)(N.a,{style:{color:"#393e46"}}):Object(G.jsx)(z.a,{style:{color:"#393e46"}})})})}})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(a=pe.passwordConfirm)||void 0===a?void 0:a.message})]})]}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",columns:12,children:Object(G.jsx)(x.a,{item:!0,xs:8,sm:6,md:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(R.a,{}),sx:{m:1,mt:-1,mb:2,textTransform:"none",fontWeight:"bold",width:"100%"},onClick:be(xe),children:"Izmjeni"})})})]})})]})]})};a(651);var dn=function(){var e,t,a=Object(b.d)((function(e){return e.auth.currentUser})),o=Object(n.useState)(!1),i=Object(d.a)(o,2),r=i[0],s=i[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),y=m[0],k=m[1],C=Object(n.useState)(!1),R=Object(d.a)(C,2),N=R[0],z=R[1],A=Object(n.useState)("success"),T=Object(d.a)(A,2),D=T[0],I=T[1],P=Object(n.useState)(!1),M=Object(d.a)(P,2),F=M[0],E=M[1],L=Object(b.c)(),V=W.c().shape({firstName:W.e().required("Ime je obavezno"),lastName:W.e().required("Prezime je obavezno"),phoneNumber:W.e().required("Broj telefona je obavezan").min(10,"Nedovoljan broj karaktera"),dob:W.b().required("Datum ro\u0111enja je obavezan"),country:W.e().required("Dr\u017eava je obavezna"),organization:W.e(),address:W.e(),city:W.e(),about:W.e()}),U=Object(B.e)({resolver:Object(q.a)(V),defaultValues:{firstName:null===a||void 0===a?void 0:a.firstName,lastName:null===a||void 0===a?void 0:a.lastName,dob:null===a||void 0===a?void 0:a.dob,address:null===a||void 0===a?void 0:a.address,country:null===a||void 0===a?void 0:a.country,city:null===a||void 0===a?void 0:a.city,phoneNumber:null===a||void 0===a?void 0:a.phoneNumber,organization:null===a||void 0===a?void 0:a.organization,about:null===a||void 0===a?void 0:a.about}}),_=U.register,Z=U.control,J=U.handleSubmit,Q=U.formState.errors,$=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,K.updateUserProfile({values:t,id:a._id}).then((function(e){L(Y.setCurrentUser(e.data.user)),s(!1),I("success"),z(!0),k(e.data.message),E(!1)})).catch((function(e){k(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena."),I("error"),z(!0),s(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:"profilePage",children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:r,children:Object(G.jsx)(H,{})}),N&&Object(G.jsx)(ie.a,{open:N,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return z(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return z(!1)},severity:D,sx:{width:"100%",font:"14px Roboto"},children:y})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(S.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Profil"})]})]})}),Object(G.jsx)("div",{className:"userCard",children:Object(G.jsxs)(xa.a,{sx:{borderRadius:3,backgroundColor:"#f4f6f8"},children:[Object(G.jsxs)("div",{className:"userNameAvatarDiv",children:[Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-end",children:Object(G.jsx)(tn.a,{sx:{mr:1},children:Object(G.jsx)(rt.a,{control:Object(G.jsx)(an.a,{onChange:function(e){E(e.target.checked)},checked:F}),label:"Urediti profil",labelPlacement:"start"})})}),Object(G.jsx)("img",{src:"female"===(null===a||void 0===a?void 0:a.gender)?pe:xe,alt:"user avatar",className:"userAvatarProfilePage"}),Object(G.jsx)(g.a,{variant:"h5",align:"center",sx:{margin:1.5},children:"".concat(null===a||void 0===a?void 0:a.firstName," ").concat(null===a||void 0===a?void 0:a.lastName)}),Object(G.jsx)(g.a,{align:"center",sx:{color:"#637381"},children:null===a||void 0===a?void 0:a.email}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,justifyContent:"center",sx:{margin:1.5},children:[Object(G.jsx)(nn.a,{style:{color:"#637381"}}),Object(G.jsx)(g.a,{align:"center",sx:{color:"#637381"},children:null===a||void 0===a?void 0:a.country})]})]}),Object(G.jsx)(je.a,{variant:"middle",sx:{mb:1.5,color:"#637381"}}),Object(G.jsxs)("div",{className:"userMainInfo",children:[Object(G.jsx)(g.a,{variant:"subtitle1",sx:{fontWeight:"bold",color:"#637381"},children:"INFO"}),Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:12,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(G.jsx)(Qt.a,{children:"Ime"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"firstName",fullWidth:!0,sx:{backgroundColor:"#fff"},disabled:!F},_("firstName")),{},{error:!!Q.firstName})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(e=Q.firstName)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(G.jsx)(Qt.a,{children:"Prezime"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({fullWidth:!0,id:"lastName",sx:{backgroundColor:"#fff"},disabled:!F},_("lastName")),{},{error:!!Q.lastName})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(t=Q.lastName)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(G.jsx)(Qt.a,{children:"Email"}),Object(G.jsx)(v.a,{fullWidth:!0,id:"email",defaultValue:null===a||void 0===a?void 0:a.email,sx:{backgroundColor:"#fff"},InputProps:{readOnly:!0},disabled:!F})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(G.jsx)(Qt.a,{children:"Datum ro\u0111enja"}),Object(G.jsxs)(xt.b,{dateAdapter:mt.a,children:[Object(G.jsx)(B.a,{control:Z,name:"dob",defaultValue:null===a||void 0===a?void 0:a.dob,render:function(e){var t=e.field;return Object(G.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{inputFormat:"dd/MM/yyyy",disableFuture:!0,onChange:function(e){t.onChange(e&&e.toJSON())},clearable:!0,disabled:!F,renderInput:function(e){return Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({},e),{},{required:!0,fullWidth:!0,sx:{backgroundColor:"#fff"},error:!!Q.dob}))}}))},rules:{required:!0}}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:Q.dob&&"Datum ro\u0111enja je obavezan"})]})]})]})]}),Object(G.jsx)(je.a,{variant:"middle",sx:{mt:2,mb:1.5,color:"#637381"}}),Object(G.jsxs)("div",{className:"userContactInfo",children:[Object(G.jsx)(g.a,{variant:"subtitle1",sx:{fontWeight:"bold",color:"#637381",mr:2},children:"KONTAKT INFO"}),Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:12,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:12,children:[Object(G.jsx)(Qt.a,{children:"Adresa"}),Object(G.jsx)(Xt.a,Object(h.a)({fullWidth:!0,id:"address",sx:{backgroundColor:"#fff"},disabled:!F},_("address")))]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:4,children:[Object(G.jsx)(Qt.a,{children:"Dr\u017eava"}),Object(G.jsx)(B.a,{name:"country",control:Z,render:function(e){var t=e.field;return Object(G.jsx)(ct.a,{id:"country",options:ft,defaultValue:null===a||void 0===a?void 0:a.country,isOptionEqualToValue:function(e,t){return e.label===t.label||e.label===t},disabled:!F,renderOption:function(e,t){return Object(G.jsxs)(f.a,Object(h.a)(Object(h.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:[Object(G.jsx)("img",{loading:"lazy",width:"20",src:"https://flagcdn.com/w20/".concat(t.code.toLowerCase(),".png"),srcSet:"https://flagcdn.com/w40/".concat(t.code.toLowerCase(),".png 2x"),alt:""}),t.label," (",t.code,")"]}))},required:!0,fullWidth:!0,renderInput:function(e){return Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({},e),{},{required:!0,sx:{backgroundColor:"#fff"},error:!!Q.country}))},onChange:function(e,a){return t.onChange(a&&a.label)}})},rules:{required:!0}}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:Q.country&&"Dr\u017eava je obavezna"})]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:4,children:[Object(G.jsx)(Qt.a,{children:"Grad"}),Object(G.jsx)(Xt.a,Object(h.a)({fullWidth:!0,id:"city",sx:{backgroundColor:"#fff"},disabled:!F},_("city")))]}),Object(G.jsxs)(x.a,{item:!0,xs:12,sm:4,children:[Object(G.jsx)(Qt.a,{children:"Broj telefona"}),Object(G.jsx)(B.a,{control:Z,name:"phoneNumber",render:function(e){var t=e.field;return Object(G.jsx)(gt.a,{id:"phoneNumber",required:!0,fullWidth:!0,value:null===a||void 0===a?void 0:a.phoneNumber,onChange:function(e){return t.onChange(e&&e)},variant:"outlined",disableAreaCodes:!0,sx:{backgroundColor:"#fff"},disabled:!F,error:!!Q.phoneNumber})}}),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{marginLeft:4,font:"12px Roboto"},children:Q.phoneNumber&&"Broj telefona je obavezan"})]})]})]}),Object(G.jsx)(je.a,{variant:"middle",sx:{mt:2,mb:1.5,color:"#637381"}}),Object(G.jsxs)("div",{className:"additionalInfo",children:[Object(G.jsx)(g.a,{variant:"subtitle1",sx:{fontWeight:"bold",color:"#637381",mr:2},children:"DODATNI INFO"}),Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:12,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:12,sm:6,children:[Object(G.jsx)(Qt.a,{children:"Organizacija"}),Object(G.jsx)(Xt.a,Object(h.a)({fullWidth:!0,id:"organization",sx:{backgroundColor:"#fff"},disabled:!F},_("organization")))]}),Object(G.jsxs)(x.a,{item:!0,xs:12,children:[Object(G.jsx)(Qt.a,{children:"O meni"}),Object(G.jsx)(Xt.a,Object(h.a)({fullWidth:!0,id:"about",multiline:!0,rows:2,sx:{backgroundColor:"#fff"},disabled:!F},_("about")))]})]}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",columns:12,children:Object(G.jsx)(x.a,{item:!0,xs:8,sm:6,md:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(on.a,{}),sx:{m:1,textTransform:"none",fontWeight:"bold",width:"100%"},onClick:J($),disabled:!F,children:"Spasi"})})}),Object(G.jsx)(ln,{})]})]})})]})},jn=a(198),un=a(281),bn=a(399),hn=a(821),pn=a(822),xn=a(823),On=(a(652),["value"]),mn=["value"];var fn=function(){var e,t,a,o,i,r=Object(n.useState)(""),s=Object(d.a)(r,2),u=s[0],f=s[1],y=Object(n.useState)(""),S=Object(d.a)(y,2),R=S[0],N=S[1],z=Object(n.useState)([]),A=Object(d.a)(z,2),T=A[0],D=A[1],I=Object(n.useState)(!1),P=Object(d.a)(I,2),M=P[0],F=P[1],E=Object(n.useState)(!1),L=Object(d.a)(E,2),V=L[0],U=L[1],_=Object(n.useState)(""),Z=Object(d.a)(_,2),J=Z[0],Y=Z[1],Q=Object(n.useState)("success"),$=Object(d.a)(Q,2),X=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(d.a)(te,2),ne=ae[0],oe=ae[1],re=Object(b.d)((function(e){return e.auth.currentUser})),se=W.c().shape({documentName:W.e().required("Ime dokumenta je obavezno"),description:W.e().required("Opis dokumenta je obavezan"),ownership:W.e().required("Vlasni\u0161tvo dokumenta je obavezno"),publicAccess:W.a(),location:W.e().required("Lokacija je obavezna"),active:W.a(),keyWords:W.e().required("Klju\u010dne rije\u010di su obavezne")}),ce=Object(B.e)({defaultValues:{documentName:"",description:"",ownership:"",publicAccess:!1,location:"",active:!1,keyWords:""},resolver:Object(q.a)(se)}),le=ce.register,je=ce.handleSubmit,be=ce.reset,he=ce.control,pe=ce.formState.errors,xe=Object(un.a)({accept:R,onDrop:function(e){e.map((function(e,t){return Object.assign(e,{preview:URL.createObjectURL(e),fileId:t})})),D(e)},maxFiles:"image"===u?5:1,maxSize:"document"===u?25e6:1e9,disabled:!R}),Oe=xe.getRootProps,fe=xe.getInputProps,ve=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,o,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe(!0),!(T.length>0)){e.next=19;break}a=new FormData,n=0,o=Object(Ct.a)(T);try{for(o.s();!(i=o.n()).done;)r=i.value,a.append("files",r),n+=r.size}catch(s){o.e(s)}finally{o.f()}return Object.keys(t).forEach((function(e){return a.append(e,t[e])})),a.append("fileType",u),a.append("fileSize",n),a.append("userId",re._id),a.append("uploadedBy","".concat(re.firstName," ").concat(re.lastName)),e.next=13,K.createDocument(a).then((function(e){U(!0),Y(e.data.message),ee("success")})).catch((function(e){U(!0),Y(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),ee("error")}));case 13:be(),D([]),f(""),N(""),e.next=20;break;case 19:F(!0);case 20:oe(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:"newDocumentPage",children:[V&&Object(G.jsx)(ie.a,{open:V,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return U(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return U(!1)},severity:X,sx:{width:"100%"},children:J})}),Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:ne,children:Object(G.jsx)(H,{})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(ge.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Novi dokument"})]})]})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsxs)(nt.a,{variant:"outlined",sx:{m:1,maxWidth:400,width:"100%"},children:[Object(G.jsx)(Qt.a,{id:"demo-simple-select-filled-label",children:"Novi dokument"}),Object(G.jsxs)($t.a,{labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",label:"Novi dokument",value:u,onChange:function(e){switch(f(e.target.value),e.target.value){case"image":N(".jpeg, .png, .jpg, .gif");break;case"video":N(".mp4, .MPEG-4, .mkv, .avi, .flv, .mov");break;case"audio":N(".mp3, .aac, .wav, .wma");break;case"document":N(".pdf, .doc, .docx, .txt")}D([])},children:[Object(G.jsx)(ue.a,{value:"document",children:"Dokument"}),Object(G.jsx)(ue.a,{value:"video",children:"Video"}),Object(G.jsx)(ue.a,{value:"image",children:"Slika"}),Object(G.jsx)(ue.a,{value:"audio",children:"Audio"})]})]})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsxs)("div",{className:"uploadBox",children:[Object(G.jsxs)("div",Object(h.a)(Object(h.a)({className:R?"dragArea":"dragArea disabled"},Oe()),{},{children:[Object(G.jsx)(hn.a,{className:"icon"}),Object(G.jsx)("h3",{children:"Dodaj dokument"}),Object(G.jsx)("p",{children:"Povuci/izbaci"}),Object(G.jsxs)("p",{children:["Podr\u017eani fajlovi ",R]}),Object(G.jsxs)("p",{children:["maksimalno ","image"===u?5:1," ","fajl/fajlova po uploadu"]}),"document"===u&&Object(G.jsx)("p",{children:"Maksimalna veli\u010dina fajla 25MB"}),Object(G.jsx)("input",Object(h.a)({type:"file",hidden:!0},fe()))]})),Object(G.jsx)("div",{children:T.map((function(e,t){return Object(G.jsx)(Ve.a,{children:Object(G.jsx)(La.a,{secondaryAction:Object(G.jsx)(k.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){var t=Object(Bt.a)(T.filter((function(t){return t.fileId!==e})));D(t)}(e.fileId)},children:Object(G.jsx)(pn.a,{})}),children:Object(G.jsx)(Ee.a,{primary:e.path})})},t)}))})]})}),M&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",sx:{marginTop:2},children:Object(G.jsx)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return F(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:Object(G.jsx)(m.a,{children:"Fajl prilog je obavezan, molimo uploadujte fajl"})})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsxs)("div",{className:"uploadDocumentInfo",children:[Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"documentName",label:"Naziv dokumenta",type:"text",fullWidth:!0,required:!0,disabled:!u,variant:"outlined"},le("documentName",{required:!0})),{},{error:!!pe.documentName})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(e=pe.documentName)||void 0===e?void 0:e.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"description",label:"Opis",type:"text",fullWidth:!0,required:!0,disabled:!u,variant:"outlined",multiline:!0,rows:4},le("description",{required:!0})),{},{error:!!pe.description})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(t=pe.description)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"ownership",label:"Vlasni\u0161tvo",type:"text",fullWidth:!0,required:!0,disabled:!u,variant:"outlined"},le("ownership",{required:!0})),{},{error:!!pe.ownership})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(a=pe.ownership)||void 0===a?void 0:a.message}),Object(G.jsx)(rt.a,{label:"Javno dostupan",disabled:!u,control:Object(G.jsx)(B.a,{name:"publicAccess",control:he,defaultValue:!1,render:function(e){var t=e.field,a=t.value,n=Object(jn.a)(t,On);return Object(G.jsx)(bn.a,Object(h.a)(Object(h.a)({},n),{},{disabled:!u,checked:!!a,sx:{"& .MuiSvgIcon-root":{fontSize:28}},onChange:function(e,t){return n.onChange(t)}}))}}),labelPlacement:"start",sx:{marginTop:1.5,marginLeft:0}})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"location",label:"Lokacija",type:"text",fullWidth:!0,required:!0,disabled:!u,variant:"outlined"},le("location",{required:!0})),{},{error:!!pe.location})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(o=pe.location)||void 0===o?void 0:o.message})]}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsx)(rt.a,{id:"active",disabled:!u,label:"Status",control:Object(G.jsx)(B.a,{name:"active",control:he,defaultValue:!1,render:function(e){var t=e.field,a=t.value,n=Object(jn.a)(t,mn);return Object(G.jsx)(bn.a,Object(h.a)(Object(h.a)({},n),{},{disabled:!u,checked:!!a,sx:{"& .MuiSvgIcon-root":{fontSize:28}},onChange:function(e,t){return n.onChange(t)}}))}}),labelPlacement:"start",sx:{marginTop:.8,marginLeft:0}})}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({id:"keyWords",label:"Klju\u010dne rije\u010di",type:"text",fullWidth:!0,required:!0,disabled:!u,variant:"outlined"},le("keyWords",{required:!0})),{},{error:!!pe.keyWords})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(i=pe.keyWords)||void 0===i?void 0:i.message})]})]}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",columns:12,children:Object(G.jsx)(x.a,{item:!0,xs:8,sm:6,md:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(xn.a,{}),style:{textTransform:"none",fontWeight:"bold",marginTop:15,width:"100%"},disabled:!u,onClick:je(ve),children:"Spasi"})})})]})})]})},vn=a(220),gn=a.p+"static/media/privateDoc.5627b096.png";a(653);var yn=function(e){var t,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],r=o[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),u=j[0],x=j[1],f=Object(n.useState)(!1),y=Object(d.a)(f,2),k=y[0],S=y[1],R=Object(b.d)((function(e){return e.auth.currentUser})),N=Object(b.c)(),z=W.c().shape({reason:W.e().required("Razlog je obavezan")}),A=Object(B.e)({defaultValues:{reason:""},resolver:Object(q.a)(z)}),F=A.register,E=A.handleSubmit,L=A.reset,V=A.formState.errors,U=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),n={reason:a.reason,user:R._id,document:null===e||void 0===e?void 0:e.document._id,type:"download"},t.next=4,K.createRequest(n).then((function(t){r(!1),e.onClose(!0,t.data.message),L(),N(Y.setCurrentUser(t.data.currentUser))})).catch((function(e){S(!0),x(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),r(!1)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:i,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:function(){e.onClose(),L()},children:[Object(G.jsx)(D.a,{children:"Zatra\u017eite preuzimanje dokumenta"}),Object(G.jsxs)(I.a,{children:[Object(G.jsx)(P.a,{children:"Molimo vas da unese razlog zbog kojeg \u017eelite preuzeti ovaj dokument."}),k&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return S(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),u]}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({autoFocus:!0,margin:"dense",id:"reason",label:"Razlog",type:"text",fullWidth:!0,required:!0,multiline:!0,rows:2,variant:"standard"},F("reason")),{},{error:!!V.reason})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(t=V.reason)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{variant:"outlined",color:"primary",onClick:function(){e.onClose(),L()},sx:{textTransform:"none",fontFamily:"Roboto",fontWeight:"bold"},children:"Poni\u0161ti"}),Object(G.jsx)(w.a,{variant:"contained",sx:{textTransform:"none",fontFamily:"Roboto",color:"#fff",fontWeight:"bold"},onClick:E(U),children:"Po\u0161alji"})]})]})]})},kn=Object(he.a)((function(){return{documentInfo:{maxWidth:800,width:"100%",display:"block",margin:"auto"},docMoreInfo:{maxWidth:600,width:"100%"},docLabel:{color:"#393E46",fontWeight:"bold"},documentInfoGrid:{padding:1,marginLeft:20,"@media (max-width: 768px)":{marginLeft:0}},reqAccessBtn:{marginTop:50}}}));function wn(e){var t,a=Object(n.useState)(-1),o=Object(d.a)(a,2),i=o[0],r=o[1],s=Object(n.useState)(!1),j=Object(d.a)(s,2),u=j[0],h=j[1],m=Object(n.useState)(!1),f=Object(d.a)(m,2),v=f[0],y=f[1],k=Object(n.useState)(""),C=Object(d.a)(k,2),S=C[0],R=C[1],N=Object(n.useState)("success"),z=Object(d.a)(N,2),A=z[0],T=z[1],D=Object(n.useState)(!1),I=Object(d.a)(D,2),P=I[0],M=I[1],B=null===e||void 0===e?void 0:e.document,q=null===e||void 0===e?void 0:e.isDownloadAvailable,W=null===e||void 0===e?void 0:e.isDownloadRequestSent,F=null===e||void 0===e?void 0:e.isDocPrivate,E=Object(b.d)((function(e){return e.auth.currentUser})),L=kn(),V=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,K.downloadDocument({docId:null===B||void 0===B?void 0:B._id},{responseType:"blob"}).then((function(e){var t=e.data.document;y(!0),T(e.data.status),R(e.data.message);var a=document.createElement("a");(null===t||void 0===t?void 0:t.files.length)>1?a.href=null===t||void 0===t?void 0:t.files[i]:a.href=null===t||void 0===t?void 0:t.files[0],document.body.appendChild(a),a.click(),document.body.removeChild(a)})).catch((function(e){R(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),y(!0),T(e.response?e.response.data.status:"error")}));case 3:h(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:L.documentInfo,children:[u&&Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"#fff"},open:u,children:Object(G.jsx)(H,{})}),v&&Object(G.jsx)(ie.a,{open:v,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return y(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return y(!1)},severity:A,sx:{width:"100%",font:"14px Roboto"},children:S})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,className:L.documentInfoGrid,children:[q&&!F&&Object(G.jsx)("div",{children:Object(G.jsx)(x.a,{item:!0,xs:16,children:(null===B||void 0===B?void 0:B.files.length)>1?Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(nt.a,{size:"small",sx:{minWidth:130},children:[Object(G.jsx)(Qt.a,{children:"Izaberi sliku"}),Object(G.jsx)($t.a,{label:"Izaberi sliku",onChange:function(e){r(e.target.value)},defaultValue:"",children:null===B||void 0===B?void 0:B.files.map((function(e,t){return Object(G.jsxs)(ue.a,{name:e,value:t,children:["Slika ",++t]},t)}))})]}),Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold",height:40},onClick:V,disabled:-1===i,children:"Preuzmi"})]}):Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold"},onClick:V,children:"Preuzmi"})})}),!q&&!F&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:W?Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold"},disabled:!0,children:"Zahtjev za preuzimanje dokumenta je poslan"}):Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold"},onClick:function(){M(!0)},children:"Zatra\u017eite preuzimanje dokumenta"})}),Object(G.jsx)(x.a,{item:!0,xs:16,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Opis dokumenta:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",sx:{maxHeight:200,overflow:"auto"},children:null===B||void 0===B?void 0:B.description})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Tip dokumenta:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:function(e){switch(e){case"image":return"Slika";case"video":return"Video";case"document":return"Dokument";case"audio":return"Audio"}}(null===B||void 0===B?void 0:B.fileType)})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Veli\u010dina:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:(t=null===B||void 0===B?void 0:B.documentSize,(null===t||void 0===t?void 0:t.length)>6?"".concat(Number(t/1e6).toFixed(2)," MB"):(null===t||void 0===t?void 0:t.length)>9?"".concat(Number(t/1e9).toFixed(2)," GB"):"".concat(Number(t/1e3).toFixed(2)," kB"))})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Lokacija:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:null===B||void 0===B?void 0:B.location})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Vrsta vrijednosti:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:(null===B||void 0===B?void 0:B.publicAccess)?"Javno dostupan":"Nije javno dostupan"})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Klju\u010dne rije\u010di:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:null===B||void 0===B?void 0:B.keyWords})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Vlasni\u0161tvo:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:null===B||void 0===B?void 0:B.ownership})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Zadnja izmjena:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:_e(null===B||void 0===B?void 0:B.lastEdit)})]})}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Status:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:!0===(null===B||void 0===B?void 0:B.active)?"Aktivan":"Neaktivan"})]})}),("admin"===E.role||"editor"===E.role)&&Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Uploadovao/la:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:null===B||void 0===B?void 0:B.uploadedBy})]})}),("admin"===E.role||"editor"===E.role)&&(null===B||void 0===B?void 0:B.editedBy)&&Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"subtitle1",className:L.docLabel,children:["Izmjenio/la:"," "]}),Object(G.jsx)(g.a,{variant:"subtitle1",children:null===B||void 0===B?void 0:B.editedBy})]})})]})}),P&&Object(G.jsx)(yn,{document:B,visible:P,onClose:function(t,a){t&&(e.onChangeDownloadStatus(t,a),R("Zahtjev za preuzimanje dokumenta je poslan"),y(!0),T("success")),M(!1)}})]})}var Cn=function(e){var t,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],r=o[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),u=j[0],x=j[1],f=Object(n.useState)(!1),y=Object(d.a)(f,2),k=y[0],S=y[1],R=Object(b.d)((function(e){return e.auth.currentUser})),N=Object(b.c)(),z=W.c().shape({reason:W.e().required("Razlog je obavezan")}),A=Object(B.e)({defaultValues:{reason:""},resolver:Object(q.a)(z)}),F=A.register,E=A.handleSubmit,L=A.reset,V=A.formState.errors,U=function(){var t=Object(l.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),n={reason:a.reason,user:R._id,document:null===e||void 0===e?void 0:e.document._id,type:"access"},t.next=4,K.createRequest(n).then((function(t){r(!1),e.onClose(!0,t.data.message),L(),N(Y.setCurrentUser(t.data.currentUser))})).catch((function(e){S(!0),x(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),r(!1)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:i,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:function(){e.onClose(),L()},children:[Object(G.jsx)(D.a,{children:"Zatra\u017eite pregled dokumenta"}),Object(G.jsxs)(I.a,{children:[Object(G.jsx)(P.a,{children:"Molimo vas da unese razlog zbog kojeg \u017eelite imati pristup ovom dokumentu."}),k&&Object(G.jsxs)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return S(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:[Object(G.jsx)(m.a,{children:"Gre\u0161ka"}),u]}),Object(G.jsx)(v.a,Object(h.a)(Object(h.a)({autoFocus:!0,margin:"dense",id:"reason",label:"Razlog",type:"text",fullWidth:!0,required:!0,multiline:!0,rows:2,variant:"standard"},F("reason")),{},{error:!!V.reason})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{textAlign:"left",font:"12px Roboto"},children:null===(t=V.reason)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{variant:"outlined",color:"primary",onClick:function(){e.onClose(),L()},sx:{textTransform:"none",fontFamily:"Roboto",fontWeight:"bold"},children:"Poni\u0161ti"}),Object(G.jsx)(w.a,{variant:"contained",sx:{textTransform:"none",fontFamily:"Roboto",color:"#fff",fontWeight:"bold"},onClick:E(U),children:"Po\u0161alji"})]})]})]})},Sn=a(835),Rn=a(827),Nn=a(833),zn=a(824),An=a(825),Tn=a(826),Dn=a(329),In=a.n(Dn),Pn=a(423);a(678),a(679),a(680),a(681);Nn.a.use([zn.a,An.a,Tn.a]);var Mn=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(n.useState)(0),s=Object(d.a)(r,2),c=s[0],l=s[1],j=Object(n.useState)([]),u=Object(d.a)(j,2),b=u[0],h=u[1],p=null===e||void 0===e?void 0:e.document;Object(n.useEffect)((function(){if("image"===(null===p||void 0===p?void 0:p.fileType)){var e,t=[],a=Object(Ct.a)(null===p||void 0===p?void 0:p.files);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push({src:n,width:200,height:200})}}catch(o){a.e(o)}finally{a.f()}h(t)}}),[p]);var x=function(){var e=c;e++,l(e)},O=function(){var e=c;e--,l(e)};return Object(G.jsx)("div",{className:"documentFile",children:function(e){switch(e){case"image":return Object(G.jsx)("div",{className:"imageFile",onContextMenu:function(e){return e.preventDefault()},children:(null===p||void 0===p?void 0:p.files.length)>1?Object(G.jsxs)("div",{children:[Object(G.jsx)(Sn.a,{className:"swiper",style:{"--swiper-navigation-color":"#000","--swiper-pagination-color":"#000"},navigation:!0,pagination:{clickable:!0},children:null===p||void 0===p?void 0:p.files.map((function(e,t){return Object(G.jsx)(Rn.a,{className:"swiperSlide",onClick:function(){i(!0),l(t)},children:Object(G.jsx)("div",{className:"swiper-zoom-container",children:Object(G.jsx)("img",{src:e,alt:"Dokument slika"})})},t)}))}),Object(G.jsx)(In.a,{imgs:b,isOpen:o,onClose:function(){return i(!1)},width:1500,currImg:c,onClickPrev:O,onClickNext:x,spinnerDisabled:!0,backdropCloseable:!0})]}):Object(G.jsxs)("div",{className:"imageFile",children:[Object(G.jsx)("img",{src:null===p||void 0===p?void 0:p.files[0],alt:"Dokument slika",onClick:function(){return i(!0)}}),Object(G.jsx)(In.a,{imgs:[{src:null===p||void 0===p?void 0:p.files[0]}],isOpen:o,onClose:function(){return i(!1)},width:1500,spinnerDisabled:!0,backdropCloseable:!0,onClickImg:function(e){return e.preventDefault()}})]})});case"video":return Object(G.jsx)("div",{className:"videoFile",children:Object(G.jsx)("video",{src:null===p||void 0===p?void 0:p.files[0],controls:!0,controlsList:"nodownload"})});case"audio":return Object(G.jsx)(Pn.a,{src:null===p||void 0===p?void 0:p.files[0],customAdditionalControls:[],className:"audioFile"});case"document":return Object(G.jsx)("iframe",{sandbox:"allow-scripts allow-same-origin",title:null===p||void 0===p?void 0:p.documentName,src:"https://docs.google.com/gview?url=".concat(encodeURIComponent(null===p||void 0===p?void 0:p.files[0]),"&embedded=true"),frameBorder:"0",width:"100%",className:"docFile",allowFullScreen:!0,onContextMenu:function(e){return e.preventDefault()}})}}(null===p||void 0===p?void 0:p.fileType)})};a(682);function Bn(e){var t,a=e.users,o=Object(n.useState)(!1),i=Object(d.a)(o,2),r=i[0],s=i[1],c=Object(oe.a)("(max-width:540px)"),l=a&&a.map((function(e){return{id:e._id,username:e.user,time:_e(e.time)}})),j={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!c&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista korisnika koji su preuzeli dokument je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{className:"downloadedBy",children:Object(G.jsxs)(rn.a,{expanded:"panel1"===r,onChange:(t="panel1",function(e,a){s(!!a&&t)}),sx:{m:1,borderRadius:1},children:[Object(G.jsx)(sn.a,{expandIcon:Object(G.jsx)(te.a,{}),children:Object(G.jsx)(g.a,{children:"Lista korisnika koji su preuzeli dokument"})}),Object(G.jsx)(cn.a,{sx:{padding:1},children:Object(G.jsx)(zt.a,{columns:[{title:"Ime i prezime",field:"username",sorting:!0},{title:"Vrijeme preuzimanja",field:"time"}],data:l,title:"",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20,25,50,100],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:function(e){return{color:e.removed&&"grey",font:"15px Roboto"}},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:10}},localization:j})})]})})}var qn=Object(he.a)((function(){return{reqAccessBtn:{marginTop:30,marginBottom:30}}}));var Wn=function(){var e=Object(u.i)().id,t=Object(n.useState)(!0),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(n.useState)(null),s=Object(d.a)(r,2),h=s[0],O=s[1],m=Object(n.useState)(!1),f=Object(d.a)(m,2),v=f[0],y=f[1],k=Object(n.useState)(""),C=Object(d.a)(k,2),S=C[0],R=C[1],N=Object(n.useState)("error"),z=Object(d.a)(N,2),A=z[0],T=z[1],D=Object(n.useState)(!0),I=Object(d.a)(D,2),P=I[0],M=I[1],B=Object(n.useState)(!1),q=Object(d.a)(B,2),W=q[0],F=q[1],E=Object(n.useState)(!1),L=Object(d.a)(E,2),V=L[0],U=L[1],_=Object(n.useState)(!1),Z=Object(d.a)(_,2),J=Z[0],Y=Z[1],Q=Object(n.useState)(!1),$=Object(d.a)(Q,2),X=$[0],ee=$[1],te=Object(b.d)((function(e){return e.auth.currentUser})),ae=qn(),ne=Object(u.h)();return Object(n.useEffect)((function(){var t=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getDocument({id:e}).then((function(t){O(t.data.document),"reader"!==te.role||t.data.document.active||ne("/"),!0===t.data.document.publicAccess&&M(!1),("editor"===te.role||"admin"===te.role||te.approvedDocuments.includes(e))&&M(!1),te.pendingDocuments.includes(e)&&U(!0),("editor"===te.role||"admin"===te.role||te.approvedDownload.includes(e))&&Y(!0),te.pendingDownload.includes(e)&&ee(!0),i(!1)})).catch((function(e){R(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),y(!0),T("error"),ne("/dokumenti"),i(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e,ne,te]),Object(G.jsx)("div",{children:o?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{className:"viewDocumentPage",onContextMenu:function(e){return e.preventDefault()},children:[v&&Object(G.jsx)(ie.a,{open:v,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return y(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return y(!1)},severity:A,sx:{width:"100%",font:"14px Roboto"},children:S})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(ge.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Pregled"})]})]})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsx)(vn.a,{style:{padding:10,marginTop:20,backgroundColor:P?"#393e46":"#fff"},children:Object(G.jsxs)(de.a,{direction:"row",spacing:2,children:[Object(G.jsxs)(g.a,{variant:"h6",style:{color:P?"#fff":"#393e46"},children:["Naziv dokumenta:"," "]}),Object(G.jsx)(g.a,{variant:"h6",style:{color:P?"#fff":"#393e46"},children:null===h||void 0===h?void 0:h.documentName})]})})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:P?Object(G.jsx)("div",{className:"documentFile",children:Object(G.jsx)("img",{src:gn,className:"privateDocImage",alt:"locked Document"})}):Object(G.jsx)(Mn,{document:h})}),P&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",className:ae.reqAccessBtn,children:V?Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold"},disabled:!0,children:"Zahtjev za pregled dokumenta je poslan"}):Object(G.jsx)(w.a,{variant:"contained",style:{textTransform:"none",fontWeight:"bold"},onClick:function(){F(!0)},children:"Zatra\u017eite pregled dokumenta"})}),Object(G.jsx)(wn,{document:h,isDownloadAvailable:J,isDownloadRequestSent:X,isDocPrivate:P,onChangeDownloadStatus:function(){ee(!0)}}),("editor"===(null===te||void 0===te?void 0:te.role)||"admin"===(null===te||void 0===te?void 0:te.role))&&Object(G.jsx)(Bn,{users:h.downloadedBy}),W&&Object(G.jsx)(Cn,{document:h,visible:W,onClose:function(e,t){!0===e&&(U(!0),R(t),y(!0),T("success")),F(!1)}})]})})};a(683);var Fn=function(){var e=Object(b.d)((function(e){return e.auth.currentUser}));return Object(G.jsxs)("div",{className:"documentsPage",children:[Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(ge.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Dokumenti"})]})]})}),"admin"===e.role&&Object(G.jsx)(ba,{style:{marginTop:50}})]})};a(684);var En=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),r=Object(d.a)(i,2),s=r[0],h=r[1],O=Object(n.useState)(!1),m=Object(d.a)(O,2),v=m[0],y=m[1],k=Object(n.useState)(""),w=Object(d.a)(k,2),C=w[0],S=w[1],R=Object(oe.a)("(max-width:540px)"),N=Object(u.h)(),z=Object(b.d)((function(e){return e.docs.searchQuery}));Object(n.useEffect)((function(){h(!0);var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.searchDocument({query:z}).then((function(e){o(e.data.documents),h(!1)})).catch((function(e){y(!0),S(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[z]);var A=function(e){switch(e){case"document":return"Dokument";case"audio":return"Audio";case"video":return"Video";case"image":return"Slika"}},T=a&&a.map((function(e){return{id:e._id,documentName:At(e.documentName),documentType:A(e.fileType),description:e.description&&Object(G.jsx)(Fe.a,{title:e.description,placement:"top-start",children:Object(G.jsx)(f.a,{children:e.description})}),ownership:At(e.ownership),location:At(e.location)}})),D={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!R&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista pretra\u017eivanja je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsx)("div",{className:"searchPage",children:s?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{children:[v&&Object(G.jsx)(ie.a,{open:v,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return y(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return y(!1)},severity:"error",sx:{width:"100%"},children:C})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(Te.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Pretraga"})]})]})}),Object(G.jsx)(zt.a,{columns:[{title:"Naziv dokumenta",field:"documentName",sorting:!1,width:"20%"},{title:"Tip dokumenta",field:"documentType",sorting:!1,width:"10%"},{title:"Opis",field:"description",sorting:!1,width:"35%",align:"left",searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200}},{title:"Vlasni\u0161tvo",field:"ownership",sorting:!1},{title:"Lokacija",field:"location",sorting:!1}],data:T,actions:[{icon:function(){return Object(G.jsx)(Rt.a,{})},tooltip:"Pogledati",onClick:function(e,t){return N("/pregled/".concat(t.id))}}],title:"Lista dokumenata",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:{font:"15px Roboto"},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:15}},localization:D,style:{marginTop:10}})]})})};a(685);var Ln=function(){var e=Object(b.d)((function(e){return e.requests.allRequests})),t=Object(oe.a)("(max-width:540px)"),a=Object(b.c)(),n=function(e){switch(e){case"document":return"Dokument";case"audio":return"Audio";case"video":return"Video";case"image":return"Slika"}},o=e&&e.map((function(e){var t,a,o,i,r,s;return{id:e._id,userId:null===(t=e.user)||void 0===t?void 0:t._id,docId:null===(a=e.document)||void 0===a?void 0:a._id,documentName:At(null===(o=e.document)||void 0===o?void 0:o.documentName),documentType:n(null===(i=e.document)||void 0===i?void 0:i.fileType),reason:e.reason&&Object(G.jsx)(Fe.a,{title:e.reason,placement:"top-start",children:Object(G.jsx)(f.a,{children:e.reason})}),description:e.reason,requestedBy:At("".concat(null===(r=e.user)||void 0===r?void 0:r.firstName," ").concat(null===(s=e.user)||void 0===s?void 0:s.lastName)),type:e.type,typeTable:"access"===e.type?Object(G.jsx)(qt.a,{label:"Pregled dokumenta",style:{color:"#7A0C2E",backgroundColor:"#FFE7D9",fontWeight:"bold"},size:"small"}):Object(G.jsx)(qt.a,{label:"Preuzimanje dokumenta",style:{color:"#04297A",backgroundColor:"#D0F2FF",fontWeight:"bold"},size:"small"}),isApproved:!e.isApproved&&Object(G.jsx)(qt.a,{label:"Na \u010dekanju",style:{color:"#B78103",backgroundColor:"#FFF7CD",fontWeight:"bold"},size:"small"}),createdAt:e.createdAt,createdAtTable:_e(e.createdAt)}})),i={pagination:{labelDisplayedRows:"",previousTooltip:"Prethodna",nextTooltip:"Sljede\u0107a",lastTooltip:"Posljednja",firstTooltip:"Prva",labelRowsPerPage:!t&&"Redova po stranici",labelRowsSelect:""},toolbar:{nRowsSelected:"{0} row(s) selected",searchPlaceholder:"Pretraga...",showColumnsTitle:"Prika\u017ei kolone",addRemoveColumns:"Dadaj ili ukloni kolonu"},header:{actions:"Opcije"},body:{emptyDataSourceMessage:"Lista zahtjeva je prazna",filterRow:{filterTooltip:"Filter"}}};return Object(G.jsxs)("div",{className:"requestsPage",children:[Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",sx:{mb:1},children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(ee.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Zahtjevi"})]})]})}),Object(G.jsx)(zt.a,{columns:[{title:"Naziv dokumenta",field:"documentName",sorting:!1,width:"20%"},{title:"Tip dokumenta",field:"documentType",sorting:!1,width:"10%"},{title:"Korisnik",field:"requestedBy",sorting:!1,width:"10%"},{title:"Datum",field:"createdAtTable",sorting:!1,width:"15%"},{title:"Opis",field:"reason",sorting:!1,width:"35%",align:"left",searchable:!1,cellStyle:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:200}},{title:"Tip zahtjeva",field:"typeTable",sorting:!1,width:"5%",align:"left",searchable:!1},{title:"Odobren",field:"isApproved",sorting:!1}],data:o,actions:[{icon:function(){return Object(G.jsx)(Me.a,{color:"success"})},tooltip:"Pogledati",onClick:function(e,t){return function(e){a(Je.setRequestModalVisible()),a(Je.setSelectedRequest(e))}(t)}}],title:"Lista zahjeva",options:{actionsColumnIndex:-1,columnsButton:!0,grouping:!1,sorting:!0,paging:!0,pageSizeOptions:[5,10,20,25,50,100],pageSize:10,emptyRowsWhenPaging:!1,rowStyle:{font:"15px Roboto"},headerStyle:{background:"#ddd",color:"#000",fontWeight:"bold",paddingRight:10}},localization:i})]})};var Vn=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(b.d)((function(e){return e.requests.allRequests})),s=null===e||void 0===e?void 0:e.selected,j=Object(b.c)(),u=function(t){e.onClose(s.id,!0),j(Kt.setIsModalResAlertVisible()),j(Kt.setModalAlertType("success")),j(Kt.setModalResMessage(t.data.message)),i(!1);var a=r.filter((function(e){return e._id!==s.id}));j(Je.setAllRequests(a))},h=function(t){j(Kt.setIsModalResAlertVisible()),j(Kt.setModalAlertType("error")),j(Kt.setModalResMessage(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena")),i(!1),e.onClose()},p=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,K.approveRequest({id:s.id,userId:s.userId,docId:s.docId,type:s.type}).then((function(e){u(e)})).catch((function(e){h(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,K.declineRequest({id:s.id,userId:s.userId,docId:s.docId,type:s.type}).then((function(e){u(e)})).catch((function(e){h(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsxs)(I.a,{children:[Object(G.jsxs)(P.a,{children:["Da li sigurno \u017eelite dozvoliti"," ","".concat("access"===(null===s||void 0===s?void 0:s.type)?"pristup dokumentu":"preuzimanje dokumenta"),": ",null===s||void 0===s?void 0:s.documentName,", korisniku:"," ",null===s||void 0===s?void 0:s.requestedBy,"?"]}),Object(G.jsxs)(P.a,{component:"span",children:["Razlog: ",null===s||void 0===s?void 0:s.description]}),Object(G.jsxs)(g.a,{variant:"caption",component:"span",sx:{ml:-.5,mt:2,display:"flex",alignItems:"center",color:"text.disabled"},children:[Object(G.jsx)(Be.a,{}),_e(null===s||void 0===s?void 0:s.createdAt)]})]}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Zatvori"}),Object(G.jsx)(w.a,{onClick:x,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Odbaci"}),Object(G.jsx)(w.a,{onClick:p,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Prihvati"})]})]})]})},Un=a(832),Kn=a(828),Gn=a(829);a(686);var Hn=function(e){var t=Object(n.useState)(null===e||void 0===e?void 0:e.document.files),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.document,s=Object(n.useRef)(null),c=null===e||void 0===e?void 0:e.isEditEnabled,l=function(){switch(null===r||void 0===r?void 0:r.fileType){case"image":return".jpeg, .png, .jpg, .gif";case"video":return".mp4, .MPEG-4, .mkv, .avi, .flv, .mov";case"audio":return".mp3, .aac, .wav, .wma";case"document":return".pdf, .doc, .docx, .txt"}},j=Object(un.a)({accept:l(),onDrop:function(e){e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})),i(e),O(e)},maxFiles:"image"===(null===r||void 0===r?void 0:r.fileType)?5:1,maxSize:"document"===(null===r||void 0===r?void 0:r.fileType)?25e6:1e9,disabled:!c}),u=j.getRootProps,b=j.getInputProps,p=function(e){var t=Object(Bt.a)(o.filter((function(t,a){return a!==e})));i(t),O(t)},x=o.map((function(e,t){return Object(G.jsxs)("div",{className:"imageOuter",children:[c&&Object(G.jsx)(Kn.a,{style:{cursor:"pointer",position:"absolute",marginLeft:80,marginTop:-20},onClick:function(){return p(t)}}),Object(G.jsx)("div",{className:"imageInner",children:Object(G.jsx)("img",{src:e.preview?e.preview:e,className:"img",alt:"post"})})]},t)})),O=function(t){e.onEdit(t)};return Object(G.jsxs)("div",{className:"uploadBox",children:[Object(G.jsxs)("div",Object(h.a)(Object(h.a)({className:c?"dragArea":"dragArea disabled"},u()),{},{children:[Object(G.jsx)(hn.a,{className:"icon"}),Object(G.jsx)("h3",{children:"Dodaj dokument"}),Object(G.jsx)("p",{children:"Povuci/izbaci"}),Object(G.jsxs)("p",{children:["Podr\u017eani fajlovi ",l()]}),Object(G.jsxs)("p",{children:["maksimalno ","image"===(null===r||void 0===r?void 0:r.fileType)?5:1," ","fajl/fajlova po uploadu"]}),"document"===(null===r||void 0===r?void 0:r.fileType)&&Object(G.jsx)("p",{children:"Maksimalna veli\u010dina fajla 25MB"}),Object(G.jsx)("input",Object(h.a)({type:"file",hidden:!0},b()))]})),"image"===(null===r||void 0===r?void 0:r.fileType)?Object(G.jsxs)("div",{className:"imageContainer",children:[x,o.length>0&&o.length<5&&Object(G.jsxs)("div",{className:"imageOuter",style:{cursor:c?"pointer":"not-allowed"},onClick:function(){c&&s.current.click()},children:[Object(G.jsx)("input",{type:"file",hidden:!0,accept:"image/png, image/gif, image/jpeg, image/jpg",ref:s,onChange:function(e){if(e.target.files.length>0){var t=Object(Bt.a)(o),a=e.target.files[0];t.push(Object.assign(a,{preview:URL.createObjectURL(a)})),i(t),O(t)}}}),Object(G.jsx)(Gn.a,{style:{position:"absolute",marginLeft:32,marginTop:32}})]})]}):Object(G.jsx)("div",{children:o.map((function(e,t){return Object(G.jsx)(Ve.a,{children:Object(G.jsx)(La.a,{secondaryAction:Object(G.jsx)(k.a,{edge:"end","aria-label":"delete",onClick:function(){return p(t)},disabled:!c,children:Object(G.jsx)(pn.a,{})}),children:Object(G.jsx)(Ee.a,{primary:e.path?e.path:r.documentName})})},t)}))})]})},_n=(a(687),a(831)),Zn=(a(688),a(830));var Jn=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],i=a[1],r=null===e||void 0===e?void 0:e.selected,s=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,K.removeDocument(r).then((function(t){i(!1),e.onClose(t.data,!0)})).catch((function(t){i(!1),e.onClose(t.response?t.response.data.message:"Konekcija sa serverom nije uspostavljena",!0)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:1500},open:o,children:Object(G.jsx)(H,{})}),Object(G.jsxs)(T.a,{open:e.visible,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(G.jsxs)(I.a,{children:[Object(G.jsxs)(de.a,{direction:"row",spacing:1,sx:{mb:2},children:[Object(G.jsx)(Zn.a,{color:"warning"}),Object(G.jsx)(g.a,{color:"#e65100",children:"Upozorenje!"})]}),Object(G.jsx)(P.a,{children:"Da li sigurno \u017eelite izbrisati ovaj dokument i sve njegove fajlove?"})]}),Object(G.jsxs)(M.a,{children:[Object(G.jsx)(w.a,{onClick:e.onClose,variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},children:"Ne"}),Object(G.jsx)(w.a,{onClick:s,variant:"contained",style:{textTransform:"none",fontWeight:"bold"},children:"Izbrisati"})]})]})]})},Yn=["value"],Qn=["value"];var $n=function(e){var t,a,o,i,r,s=Object(u.i)().id,j=Object(n.useState)(!1),b=Object(d.a)(j,2),f=b[0],v=b[1],y=Object(n.useState)(!1),k=Object(d.a)(y,2),S=k[0],R=k[1],N=Object(n.useState)(""),z=Object(d.a)(N,2),A=z[0],T=z[1],D=Object(n.useState)("success"),I=Object(d.a)(D,2),P=I[0],M=I[1],F=Object(n.useState)(!1),E=Object(d.a)(F,2),L=E[0],V=E[1],U=Object(n.useState)(!1),_=Object(d.a)(U,2),Z=_[0],J=_[1],Y=null===e||void 0===e?void 0:e.document,Q=null===e||void 0===e?void 0:e.isEditEnabled,$=null===e||void 0===e?void 0:e.files,X=Object(u.h)(),ee=W.c().shape({documentName:W.e().required("Naziv dokumenta je obavezan"),description:W.e().required("Opis dokumenta je obavezan"),ownership:W.e().required("Vlasni\u0161tvo dokumenta je obavezno"),publicAccess:W.a(),location:W.e().required("Lokacija je obavezna"),active:W.a(),keyWords:W.e().required("Klju\u010dne rije\u010di su obavezne")}),te=Object(B.e)({defaultValues:{documentName:null===Y||void 0===Y?void 0:Y.documentName,description:null===Y||void 0===Y?void 0:Y.description,ownership:null===Y||void 0===Y?void 0:Y.ownership,publicAccess:null===Y||void 0===Y?void 0:Y.publicAccess,location:null===Y||void 0===Y?void 0:Y.location,active:null===Y||void 0===Y?void 0:Y.active,keyWords:null===Y||void 0===Y?void 0:Y.keyWords},resolver:Object(q.a)(ee)}),ae=te.register,ne=te.control,oe=te.handleSubmit,re=te.formState.errors,se=function(){var t=Object(l.a)(c.a.mark((function t(a){var n,o,i,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V(!0),!($.length>0)){t.next=12;break}v(!1),n=new FormData,o=Object(Ct.a)($);try{for(o.s();!(i=o.n()).done;)r=i.value,n.append("files",r)}catch(c){o.e(c)}finally{o.f()}return Object.keys(a).forEach((function(e){return n.append(e,a[e])})),n.append("docId",s),t.next=10,K.editDocument(n).then((function(t){R(!0),T(t.data.message),M("success"),e.onShowPreview(),e.onSwitchDisable(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){R(!0),T(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),M("error")}));case 10:t.next=13;break;case 12:v(!0);case 13:V(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:"editDocumentInfo",children:[S&&Object(G.jsx)(ie.a,{open:S,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return R(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return R(!1)},severity:P,sx:{width:"100%"},children:A})}),Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:L,children:Object(G.jsx)(H,{})}),f&&Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsx)(p.a,{severity:"error",action:Object(G.jsx)(C.a,{onClick:function(){return v(!1)},style:{cursor:"pointer"}}),style:{marginBottom:15},children:Object(G.jsx)(m.a,{children:"Fajl prilog je obavezan, molimo uploadujte fajl"})})}),Object(G.jsxs)(x.a,{container:!0,spacing:2,columns:16,sx:{padding:1},children:[Object(G.jsxs)(x.a,{item:!0,xs:16,children:[Object(G.jsx)(Qt.a,{children:"Naziv dokumenta"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"documentName",fullWidth:!0,disabled:!Q},ae("documentName")),{},{error:!!re.documentName})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(t=re.documentName)||void 0===t?void 0:t.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(Qt.a,{children:"Opis"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"description",type:"text",fullWidth:!0,required:!0,disabled:!Q,variant:"outlined",multiline:!0,rows:4},ae("description",{required:!0})),{},{error:!!re.description})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(a=re.description)||void 0===a?void 0:a.message})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(Qt.a,{children:"Vlasni\u0161tvo"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"ownership",type:"text",fullWidth:!0,required:!0,disabled:!Q,variant:"outlined"},ae("ownership",{required:!0})),{},{error:!!re.ownership})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(o=re.ownership)||void 0===o?void 0:o.message}),Object(G.jsx)(rt.a,{label:"Javno dostupan",disabled:!Q,control:Object(G.jsx)(B.a,{name:"publicAccess",control:ne,defaultValue:!1,render:function(e){var t=e.field,a=t.value,n=Object(jn.a)(t,Yn);return Object(G.jsx)(bn.a,Object(h.a)(Object(h.a)({},n),{},{disabled:!Q,checked:!!a,sx:{"& .MuiSvgIcon-root":{fontSize:28}},onChange:function(e,t){return n.onChange(t)}}))}}),labelPlacement:"start",sx:{marginTop:1.5,marginLeft:0}})]}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(Qt.a,{children:"Lokacija"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"location",type:"text",fullWidth:!0,required:!0,disabled:!Q,variant:"outlined"},ae("location",{required:!0})),{},{error:!!re.location})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(i=re.location)||void 0===i?void 0:i.message})]}),Object(G.jsx)(x.a,{item:!0,xs:16,sm:8,children:Object(G.jsx)(rt.a,{id:"active",disabled:!Q,label:"Status",control:Object(G.jsx)(B.a,{name:"active",control:ne,defaultValue:!1,render:function(e){var t=e.field,a=t.value,n=Object(jn.a)(t,Qn);return Object(G.jsx)(bn.a,Object(h.a)(Object(h.a)({},n),{},{disabled:!Q,checked:!!a,sx:{"& .MuiSvgIcon-root":{fontSize:28}},onChange:function(e,t){return n.onChange(t)}}))}}),labelPlacement:"start",sx:{marginTop:3.5,marginLeft:0}})}),Object(G.jsxs)(x.a,{item:!0,xs:16,sm:8,children:[Object(G.jsx)(Qt.a,{children:"Klju\u010dne rije\u010di"}),Object(G.jsx)(Xt.a,Object(h.a)(Object(h.a)({id:"keyWords",type:"text",fullWidth:!0,required:!0,disabled:!Q,variant:"outlined"},ae("keyWords",{required:!0})),{},{error:!!re.keyWords})),Object(G.jsx)(g.a,{variant:"inherit",color:"red",sx:{font:"12px Roboto"},children:null===(r=re.keyWords)||void 0===r?void 0:r.message})]})]}),Object(G.jsxs)(x.a,{container:!0,justifyContent:"center",spacing:2,columns:12,children:[Object(G.jsx)(x.a,{item:!0,xs:6,md:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(_n.a,{}),style:{textTransform:"none",fontWeight:"bold",marginTop:15,width:"100%"},color:"error",disabled:!Q,onClick:function(){J(!0)},children:"Izbri\u0161i"})}),Object(G.jsx)(x.a,{item:!0,xs:6,md:4,children:Object(G.jsx)(w.a,{variant:"contained",startIcon:Object(G.jsx)(Un.a,{}),style:{textTransform:"none",fontWeight:"bold",marginTop:15,width:"100%"},disabled:!Q,onClick:oe(se),children:"Izmjeni"})})]}),Z&&Object(G.jsx)(Jn,{visible:Z,onClose:function(e,t){t&&(R(!0),M(e.status?e.status:"error"),T(e.message?e.message:e),setTimeout((function(){X("/dokumenti")}),1e3)),J(!1)},selected:s})]})};var Xn=function(){var e=Object(u.i)().id,t=Object(n.useState)(!0),a=Object(d.a)(t,2),o=a[0],i=a[1],r=Object(n.useState)(null),s=Object(d.a)(r,2),b=s[0],h=s[1],O=Object(n.useState)([]),m=Object(d.a)(O,2),f=m[0],v=m[1],y=Object(n.useState)(!1),k=Object(d.a)(y,2),C=k[0],S=k[1],R=Object(n.useState)(""),N=Object(d.a)(R,2),z=N[0],A=N[1],T=Object(n.useState)("error"),D=Object(d.a)(T,2),I=D[0],P=D[1],M=Object(n.useState)(!1),B=Object(d.a)(M,2),q=B[0],W=B[1],F=Object(n.useState)(!1),E=Object(d.a)(F,2),L=E[0],V=E[1],U=Object(u.h)();return Object(n.useEffect)((function(){var t=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getDocument({id:e}).then((function(e){h(e.data.document),v(e.data.document.files),i(!1)})).catch((function(e){A(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),S(!0),P("error"),U("/dokumenti"),i(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e,U]),Object(G.jsx)("div",{children:o?Object(G.jsx)(H,{loaderColor:"black"}):Object(G.jsxs)("div",{className:"editDocumentPage",children:[C&&Object(G.jsx)(ie.a,{open:C,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return S(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return S(!1)},severity:I,sx:{width:"100%",font:"14px Roboto"},children:z})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"flex-start",sx:{mb:1},children:Object(G.jsxs)(St.a,{"aria-label":"breadcrumb",children:[Object(G.jsxs)(j.b,{to:"/",style:{textDecoration:"none",color:"grey"},children:[Object(G.jsx)(me.a,{sx:{mr:.5},fontSize:"inherit"}),"Po\u010detna"]}),Object(G.jsxs)(de.a,{direction:"row",spacing:2,style:{color:"#393e46"},children:[Object(G.jsx)(Un.a,{sx:{mr:-1.2,marginTop:.3},fontSize:"inherit"}),Object(G.jsx)(g.a,{children:"Izmjena dokumenta"})]})]})}),Object(G.jsx)("div",{className:"editSwitch",children:Object(G.jsxs)(x.a,{container:!0,justifyContent:"flex-end",children:[L&&Object(G.jsx)(w.a,{variant:"outlined",style:{textTransform:"none",fontWeight:"bold"},onClick:function(){return U("/pregled/".concat(e))},children:"Pregled"}),Object(G.jsx)(tn.a,{sx:{mr:1},children:Object(G.jsx)(rt.a,{control:Object(G.jsx)(an.a,{onChange:function(e){W(e.target.checked)},checked:q}),label:"Izmjena dokumenta",labelPlacement:"start"})})]})}),Object(G.jsx)(x.a,{container:!0,justifyContent:"center",children:Object(G.jsx)(Hn,{document:b,isEditEnabled:q,onEdit:function(e){v(e)}})}),Object(G.jsx)(x.a,{justifyContent:"center",container:!0,spacing:2,columns:16,sx:{padding:1},children:Object(G.jsx)($n,{document:b,isEditEnabled:q,files:f,onShowPreview:function(){return V(!0)},onSwitchDisable:function(){return W(!1)}})})]})})};var eo=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(""),r=Object(d.a)(i,2),s=r[0],h=r[1],x=Object(b.d)((function(e){return e.auth.isAuthenticated})),O=Object(b.d)((function(e){return e.auth.currentUser})),m=Object(b.d)((function(e){return e.docs.isSearchStarted})),f=Object(b.d)((function(e){return e.requests.isRequestModalVisible})),v=Object(b.d)((function(e){return e.requests.selectedRequest})),g=Object(b.d)((function(e){return e.modalResponse.isModalResAlertVisible})),y=Object(b.d)((function(e){return e.modalResponse.modalResMessage})),k=Object(b.d)((function(e){return e.modalResponse.modalAlertType})),w=Object(b.c)();return Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getAllRequests().then((function(e){w(Je.setAllRequests(e.data.allRequests))})).catch((function(e){o(!0),h(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!x||"editor"!==O.role&&"admin"!==O.role||e()}),[w,x,O]),Object(G.jsxs)(n.Fragment,{children:[a&&Object(G.jsx)(ie.a,{open:a,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:8e3,onClose:function(){return o(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return o(!1)},severity:"error",sx:{width:"100%"},children:s})}),g&&Object(G.jsx)(ie.a,{open:g,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:function(){return w(Kt.setIsModalResAlertHidden())},children:Object(G.jsx)(p.a,{onClose:function(){return w(Kt.setIsModalResAlertHidden())},severity:k,sx:{width:"100%"},children:y})}),Object(G.jsx)(j.a,{children:Object(G.jsxs)(u.e,{children:[Object(G.jsxs)(u.c,{path:"/",element:x?Object(G.jsx)(at,{}):Object(G.jsx)($,{}),children:[Object(G.jsx)(u.c,{index:!0,element:Object(G.jsx)(pa,{})}),Object(G.jsx)(u.c,{path:"/historijapregleda",element:"reader"===(null===O||void 0===O?void 0:O.role)||"editor"===(null===O||void 0===O?void 0:O.role)?Object(G.jsx)(It,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/statistika",element:"admin"===O.role||"editor"===O.role?Object(G.jsx)(en,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/dokumenti",element:"admin"===O.role?Object(G.jsx)(Fn,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/profil",element:Object(G.jsx)(dn,{})}),Object(G.jsx)(u.c,{path:"/novidokument",element:"admin"===O.role||"editor"===O.role?Object(G.jsx)(fn,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/izmjena/:id",element:"admin"===O.role||"editor"===O.role?Object(G.jsx)(Xn,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/pregled/:id",element:Object(G.jsx)(Wn,{})}),Object(G.jsx)(u.c,{path:"/pretraga",element:m?Object(G.jsx)(En,{}):Object(G.jsx)(u.a,{to:"/"})}),Object(G.jsx)(u.c,{path:"/zahtjevi",element:"editor"===O.role||"admin"===O.role?Object(G.jsx)(Ln,{}):Object(G.jsx)(u.a,{to:"/"})})]}),Object(G.jsx)(u.c,{path:"/registracija",element:x?Object(G.jsx)(u.a,{to:"/"}):Object(G.jsx)(yt,{})}),Object(G.jsx)(u.c,{path:"/resetPassword/:resetToken",element:x?Object(G.jsx)(u.a,{to:"/"}):Object(G.jsx)(kt,{})}),Object(G.jsx)(u.c,{path:"/validateProfile/:validationToken",element:x?Object(G.jsx)(u.a,{to:"/"}):Object(G.jsx)(wt,{})}),Object(G.jsx)(u.c,{path:"*",element:Object(G.jsx)(u.a,{to:"/"})})]})}),f&&Object(G.jsx)(Vn,{visible:f,onClose:function(){w(Je.resetInitialState())},selected:v})]})},to=a(161),ao=a(805),no=(a(689),Object(to.b)({palette:{primary:{main:"#393E46"}}}));var oo=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(""),r=Object(d.a)(i,2),s=r[0],j=r[1],u=Object(n.useState)(!0),h=Object(d.a)(u,2),x=h[0],m=h[1],f=Object(b.c)();return Object(n.useEffect)((function(){var e=localStorage.getItem("isLoggedIn"),t=function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("true"!==e){t.next=3;break}return t.next=3,K.userAuthenticated().then((function(e){f(Y.login()),f(Y.setCurrentUser(e.data.user)),localStorage.setItem("token",e.data.token)})).catch((function(e){j(e.response?e.response.data.message:"Konekcija sa serverom nije uspostavljena"),o(!0)}));case 3:setTimeout((function(){m(!1)}),1e3);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[f]),Object(G.jsx)(ao.a,{theme:no,children:x?Object(G.jsx)(O.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"#fff"},open:x,children:Object(G.jsx)(H,{loaderColor:"black"})}):Object(G.jsxs)(n.Fragment,{children:[Object(G.jsx)("div",{style:{maxWidth:400,margin:"auto"},children:a&&Object(G.jsx)(ie.a,{open:a,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:function(){return o(!1)},children:Object(G.jsx)(p.a,{onClose:function(){return o(!1)},severity:"error",sx:{width:"100%",font:"14px Roboto"},children:s})})}),Object(G.jsx)(eo,{})]})})},io=Object(Z.a)({reducer:{auth:Q,docs:Se,requests:Ye,modalResponse:Gt},middleware:function(){return Object(Z.c)({serializableCheck:!1})}});r.a.render(Object(G.jsx)(o.a.StrictMode,{children:Object(G.jsx)(b.a,{store:io,children:Object(G.jsx)(oo,{})})}),document.getElementById("root"))}},[[690,1,2]]]);
//# sourceMappingURL=main.ee3c0f84.chunk.js.map